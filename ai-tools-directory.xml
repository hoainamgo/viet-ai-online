<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:css='false' b:defaultwidgetversion='2' b:layoutsVersion='3' b:responsive='true' lang='vi' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
  <meta charset='UTF-8'/>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'/>
  <b:include name='all-head-content'/>
  <title><data:blog.pageTitle/></title>

  <!-- Open Graph Meta Tags (Social Sharing) -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Việt-AI.online - Kho công cụ AI hàng đầu" />
  <meta property="og:description" expr:content='data:view.description ? data:view.description : "Khám phá 500+ công cụ AI hàng đầu để tối ưu hóa công việc và cuộc sống của bạn."' />
  <meta name="description" expr:content='data:view.description ? data:view.description : "Khám phá 500+ công cụ AI hàng đầu để tối ưu hóa công việc và cuộc sống của bạn."' />
  <meta property="og:url" expr:content='data:blog.url' />
  <meta property="og:image" content="https://i.ibb.co/RTDTms0C/Logo-new.png" /> <!-- Placeholder: User needs to update this -->
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="Việt-AI.online" />
  <b:skin><![CDATA[
  /* ===== RESET ===== */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  /* Accessibility Focus Ring */
  *:focus-visible {
    outline: 2px solid #4361ee;
    outline-offset: 2px;
  }
  
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    background: #f0f2f5;
    color: #333;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    overflow-x: hidden; /* Prevent horizontal scroll */
    width: 100%;
  }
  
  .main-wrapper {
    display: flex;
    flex: 1;
    max-width: 1920px;
    margin: 0 auto;
    width: 100%;
    display: flex;
    flex-direction: row; /* Sidebar back to left */
  }
  
  /* ===== LEFT SIDEBAR (STICKY) ===== */
  .sidebar {
    width: 260px;
    background: #ffffff;
    border-right: 1px solid #e2e8f0;
    position: sticky;
    top: 60px; /* Below Header */
    height: calc(100vh - 60px);
    overflow-y: auto;
    flex-shrink: 0;
    padding-bottom: 40px;
    z-index: 100;
  }
  
  .sidebar::-webkit-scrollbar {
    width: 4px;
  }
  
  .sidebar::-webkit-scrollbar-thumb {
    background: #e2e8f0;
    border-radius: 10px;
  }
  
  .sidebar-header {
    padding: 24px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid #f8fafc;
  }
  
  .sidebar-header-icon {
    width: 32px;
    height: 32px;
    background: #48bb78;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 18px;
  }
  
  .sidebar-header-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .sidebar-brand-name {
    font-weight: 800; /* Bolder */
    background: linear-gradient(to right, #2563eb, #7c3aed); /* Blue-Purple Gradient */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 1.3em;
    line-height: 1.2;
    letter-spacing: -0.5px;
  }

  .sidebar-tagline {
    font-weight: 600;
    color: #ff6b35; /* Vibrant Orange */
    font-size: 0.75em; /* Slightly larger */
    line-height: 1.2;
    letter-spacing: 0.5px;
  }
  
  .sidebar-menu {
    list-style: none;
    padding: 10px 8px;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1px;
  }
  
  .menu-item-divider {
    height: 1px;
    background: #edf2f7;
    margin: 10px 15px;
  }

  .menu-link-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    text-decoration: none;
    color: white;
    background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);
    border-radius: 12px;
    margin: 5px 10px;
    font-weight: 700;
    transition: all 0.3s;
    box-shadow: 0 4px 12px rgba(255, 126, 95, 0.2);
  }

  .menu-link-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(255, 126, 95, 0.3);
  }

  .menu-link-secondary {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 15px;
    text-decoration: none;
    color: #4361ee;
    font-weight: 600;
    font-size: 0.9em;
    transition: all 0.2s;
  }

  .menu-link-secondary:hover {
    color: #3046be;
    padding-left: 20px;
  }
/* Further reduced by 35% (2px -> 1px) */
  .menu-item {
    margin: 0;
  }
  
  .menu-link {
    display: flex;
    align-items: center;
    padding: 8px 16px; /* Reduced vertical padding by 35% (12px -> 8px) */
    text-decoration: none;
    color: #2d3748; /* Darker Slate 800 for better contrast */
    font-size: 0.95em;
    font-weight: 600; /* Slightly bolder */
    border-radius: 10px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    position: relative;
  }
  
  .menu-link:hover {
    background: #f8fafc;
    color: #3182ce;
  }
  
  .menu-link.active {
    background: #edf2ff;
    color: #4361ee;
    font-weight: 700;
  }
  
  /* Pure CSS Arrow to fix encoding issues */
  .menu-link.active::after {
    content: '';
    position: absolute;
    right: 18px;
    width: 6px;
    height: 6px;
    border-top: 2px solid #4361ee;
    border-right: 2px solid #4361ee;
    transform: rotate(45deg);
    opacity: 0.8;
  }

  .menu-icon {
    margin-right: 12px;
    font-size: 1.2em;
    width: 24px;
    text-align: center;
    filter: grayscale(0.5);
    transition: filter 0.2s;
  }
  
  .menu-link:hover .menu-icon,
  .menu-link.active .menu-icon {
    filter: grayscale(0);
  }
  /* ===== NEWS TICKER ===== */
  .news-ticker-bar {
    max-width: 1400px;
    margin: 0 auto 30px;
    background: white;
    border-radius: 12px;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.02);
    border: 1px solid #f0f2f5;
  }
  
  .ticker-label {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #ff5c00;
    font-weight: 700;
    font-size: 0.9em;
    white-space: nowrap;
    padding-right: 15px;
    border-right: 1px solid #edf2f7;
  }
  
  .ticker-content {
    flex: 1;
    overflow: hidden;
    position: relative;
    height: 24px;
  }
  
  .ticker-item {
    font-size: 0.9em;
    color: #4a5568;
    line-height: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .ticker-item strong {
    color: #2d3748;
  }
  
  .ticker-more {
    font-size: 0.85em;
    color: #64748b; /* Darker for better contrast */
    text-decoration: none;
    transition: color 0.2s;
  }
  
  .ticker-more:hover {
    color: #ff5c00;
  }

  .menu-link.active::after {
    border-color: #4361ee;
  }


  .mobile-menu-toggle {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    z-index: 1000;
  }
  
  .content-area {
    flex: 1;
    min-width: 0;
    background: #f0f2f5;
    padding: 80px 0 0 0;
    display: flex;
    flex-direction: column;
  }
  
  /* ===== NEW UISDC HEADER (BLUE GRADIENT THEME) ===== */
  .header-wrapper {
    background: linear-gradient(135deg, #4169e1 0%, #2d3dcc 100%);
    height: 60px;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .header-menu-toggle {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 5px;
    width: 42px;
    height: 42px;
    background: rgba(255, 255, 255, 0.15); /* Glass effect */
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    padding: 0;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .header-menu-toggle:hover {
    background: white;
    border-color: #ff6b35; /* Brand Orange */
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4); /* Orange Glow */
  }

  /* Bars turn Orange on hover for contrast */
  .header-menu-toggle:hover .bar {
    background-color: #ff6b35 !important;
  }

  .header-menu-toggle .bar {
    width: 22px;
    height: 2px;
    background-color: white !important; /* Default White as requested */
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  /* CATEGORY DROPDOWN */
  .category-dropdown {
    position: fixed;
    top: 60px;
    left: 0;
    width: 100%;
    height: 0;
    overflow: hidden;
    z-index: 999;
    transition: height 0.3s ease;
  }

  .category-dropdown.active {
    height: 100vh;
  }

  .dropdown-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(4px);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .category-dropdown.active .dropdown-overlay {
    opacity: 1;
  }

  .dropdown-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    background: white;
    border-radius: 0 0 20px 20px;
    padding: 20px;
    transform: translateY(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  .category-dropdown.active .dropdown-content {
    transform: translateY(0);
  }

  .dropdown-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #f1f5f9;
  }

  .dropdown-header h3 {
    margin: 0;
    font-size: 1.35rem;
    background: linear-gradient(to right, #2563eb, #7c3aed);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 800;
    letter-spacing: -0.5px;
  }

  .dropdown-close {
    background: #f1f5f9;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #64748b;
  }

  .dropdown-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 16px;
    max-height: 75vh;
    overflow-y: auto;
    padding: 10px 5px 30px 5px;
  }

  .dropdown-grid::-webkit-scrollbar {
    width: 6px; /* Slightly wider for better usability */
  }

  .dropdown-grid::-webkit-scrollbar-track {
    background: #f8fafc;
    margin: 10px 0;
  }

  .dropdown-grid::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 10px;
    border: 2px solid #f8fafc; /* Adds padding effect */
  }

  .dropdown-grid::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  .dropdown-cat-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px;
    background: white;
    border-radius: 16px;
    text-decoration: none;
    color: #334155;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); /* Bouncy transition */
    border: 1px solid #f1f5f9;
    box-shadow: 0 4px 12px rgba(0,0,0,0.03);
  }

  .dropdown-cat-item:hover {
    background: white;
    border-color: #6366f1;
    color: #6366f1;
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(99, 102, 241, 0.15);
  }

  .dropdown-cat-icon {
    font-size: 1.2rem;
  }

  .header-container {
    max-width: 1400px;
    margin: 0 auto;
    height: 100%;
    display: flex;
    align-items: center;
    padding: 0 40px;
    justify-content: space-between;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .site-brand {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
  }

  .brand-title {
    color: white;
    font-size: 1.8em;
    font-weight: 900;
    letter-spacing: -0.5px;
  }

  .brand-domain {
    color: rgba(255,255,255,0.8);
    font-size: 0.75em;
    font-weight: 600;
    margin-left: 5px;
  }

  .pill-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    background: #f7fafc;
    padding: 6px 14px;
    border-radius: 8px;
    color: #4a5568;
    text-decoration: none;
    font-size: 0.85em;
    font-weight: 700;
    border: 1px solid #edf2f7;
    transition: all 0.2s;
  }

  .pill-badge:hover {
    background: #edf2f7;
    border-color: #e2e8f0;
  }

  .pill-icon {
    width: 22px;
    height: 22px;
    background: #3459e6;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: white;
  }

  .top-nav {
    display: flex;
    list-style: none;
    gap: 35px;
    margin: 0;
    padding: 0;
  }

  .top-nav-link {
    color: white;
    text-decoration: none;
    font-size: 0.95em;
    font-weight: 600;
    position: relative;
    padding: 8px 0;
    transition: all 0.2s;
    opacity: 0.9;
  }

  .top-nav-link:hover, .top-nav-link.active {
    opacity: 1;
  }

  .top-nav-link.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 3px;
    background: white;
    border-radius: 2px;
  }

  .nav-hot {
    position: absolute;
    top: -8px;
    right: -12px;
    background: #FF6B6B;
    color: white;
    font-size: 9px;
    padding: 2px 4px;
    border-radius: 3px;
    font-weight: 900;
    line-height: 1;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .util-icon {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    text-decoration: none;
    transition: all 0.2s;
    background: #f7fafc;
  }

  .util-icon:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  .icon-orange { background: #fff5eb; color: #ff5c00; }
  .icon-green { background: #f0fff4; color: #38a169; }
  .icon-blue { background: #ebf8ff; color: #3182ce; }

  .header-icon {
    font-size: 1.2em;
    color: white;
    text-decoration: none;
    opacity: 0.9;
    transition: opacity 0.2s;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
  }

  .header-icon:hover {
    opacity: 1;
    background: rgba(255,255,255,0.2);
  }
  
  .header-center {
    flex: 1;
    text-align: center;
  }
  
  .site-desc {
    color: rgba(255,255,255,0.9);
    font-size: 1.1em;
    font-weight: 300;
    margin: 10px 0 0 0;
  }
  
  
  /* ===== PREMIUM HERO SECTION (UISDC FIDELITY) ===== */
  .hero-section {
    margin: 10px 20px 30px 20px;
    padding: 0;
    border-radius: 20px;
    overflow: hidden;
  }
  
  .hero-banner-box {
    background: linear-gradient(135deg, #3b5bdb 0%, #4c6ef5 50%, #5c7cfa 100%);
    padding: 50px 40px 70px;
    position: relative;
    overflow: visible;
    text-align: center;
    color: white;
  }
  
  
  /* Decorative elements for Hero */
  .hero-banner-box::before {
    content: '';
    position: absolute;
    top: -50px;
    left: -50px;
    width: 200px;
    height: 200px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    z-index: 1;
  }

  .hero-title {
    font-size: 2.2em;
    font-weight: 800;
    margin-bottom: 30px;
    letter-spacing: -1px;
    text-shadow: 0 2px 10px rgba(0,0,0,0.1);
    position: relative;
    z-index: 2;
  }

  /* Search Tabs */
  .search-tabs-container {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-bottom: -1px; /* Overlap with search bar */
    position: relative;
    z-index: 3;
  }
  
  .search-tab {
    padding: 10px 25px;
    background: rgba(255,255,255,0.2);
    border-radius: 12px 12px 0 0;
    font-size: 0.9em;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
    backdrop-filter: blur(5px);
  }
  
  .search-tab.active {
    background: white;
    color: #333;
    padding-bottom: 12px;
  }

  .search-wrapper {
    max-width: 700px;
    margin: 0 auto 25px;
    position: relative;
    z-index: 2;
  }
  
  #searchInput {
    width: 100%;
    padding: 20px 140px 20px 30px;
    border: none;
    border-radius: 0 12px 12px 12px;
    font-size: 1em;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    outline: none;
    background: white;
    color: #333;
  }
  
  /* Special rule for first tab to merge */
  .search-tab.active + .search-tab, .search-tab.active {
     border-bottom-color: transparent;
  }

  .search-btn {
    position: absolute;
    right: 6px;
    top: 6px;
    bottom: 6px;
    background: #ff5c00;
    border: none;
    padding: 0 35px;
    border-radius: 8px;
    color: white;
    font-size: 1.3rem;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* ===== PROMO BANNERS SECTION ===== */
  .promo-banners-row {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .promo-banner {
    flex: 1;
    height: 100px;
    border-radius: 12px;
    padding: 0 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    text-decoration: none;
    transition: transform 0.3s;
    position: relative;
    overflow: hidden;
  }
  
  .promo-banner:hover {
    transform: translateY(-5px);
  }
  
  .promo-banner::after {
    content: '';
    position: absolute;
    right: -20px;
    top: -20px;
    width: 100px;
    height: 100px;
    background: rgba(255,255,255,0.05);
    border-radius: 50%;
  }

  .promo-dark { background: linear-gradient(90deg, #111 0%, #333 100%); }
  .promo-purple { background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%); }
  
  .promo-info {
    display: flex;
    align-items: center;
    gap: 15px;
    color: white;
  }
  
  .promo-logo {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  
  .promo-text h4 {
    margin: 0;
    font-size: 1.1em;
    font-weight: 800;
  }
  
  .promo-text p {
    margin: 4px 0 0 0;
    font-size: 0.85em;
    opacity: 0.8;
  }
  
  .promo-btn {
    padding: 8px 20px;
    background: #ff5c00;
    color: white;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 700;
    box-shadow: 0 4px 10px rgba(255,92,0,0.3);
  }
  
  .promo-purple .promo-btn {
    background: #3459e6;
    box-shadow: 0 4px 10px rgba(52,89,230,0.3);
  }

  /* ===== FEATURED SECTION (AI SELF-LEARNING) ===== */
  .featured-section {
    background: white;
    border-radius: 24px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.02);
  }
  
  .featured-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    gap: 30px;
  }

  .featured-header-left {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .featured-title {
    font-size: 1.4rem;
    font-weight: 900;
    letter-spacing: -0.5px;
    color: #1e293b;
    position: relative;
    padding-left: 18px;
    line-height: 1.2;
  }
  
  .featured-title::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 6px;
    height: 24px;
    background: linear-gradient(to bottom, #4f46e5, #818cf8);
    border-radius: 4px;
  }

  .featured-header-right {
    flex: 1;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 20px;
  }

  .featured-badge-btn {
    background: #ff5c00;
    color: white;
    padding: 4px 15px;
    border-radius: 100px;
    font-size: 12px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s;
  }

  .featured-badge-btn:hover {
    background: #e65200;
    transform: scale(1.05);
  }

  .inline-news-ticker {
    display: flex;
    align-items: center;
    gap: 8px;
    background: white;
    padding: 6px 15px;
    border-radius: 100px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.03);
    border: 1px solid #f1f5f9;
    font-size: 12px;
    max-width: 400px;
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .inline-news-ticker:hover {
    background: #ffffff;
    border-color: #ff5c00;
    box-shadow: 0 4px 12px rgba(255, 92, 0, 0.1);
    transform: translateY(-1px);
  }

  .inline-news-ticker:hover .ticker-arrow {
    transform: translateX(3px);
  }

  .ticker-icon {
    font-size: 14px;
    color: #ff5c00;
  }

  .ticker-text {
    color: #4a5568;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
  }

  .ticker-arrow {
    color: #64748b; /* Darker for contrast */
    font-size: 14px;
    transition: transform 0.2s;
    display: inline-block;
  }
  
  .featured-more {
    color: #718096;
    text-decoration: none;
    font-size: 0.9em;
    font-weight: 600;
    transition: color 0.2s;
  }
  
  .featured-more:hover {
    color: #3459e6;
  }
  
  .featured-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 15px;
    align-items: stretch; /* Căn chỉnh tất cả items theo chiều cao */
  }

  
  .featured-card {
    text-decoration: none;
    transition: all 0.3s;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid transparent;
  }
  
  .featured-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    border-color: #edf2f7;
  }
  
  .feat-img-box {
    position: relative;
    aspect-ratio: 16/9;
    overflow: hidden;
  }
  
  .feat-img-box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
  }
  
  .featured-card:hover .feat-img-box img {
    transform: scale(1.1);
  }
  
  .feat-info {
    padding: 12px 10px;
    display: flex;
    flex-direction: column;
    min-height: 52px; /* Đảm bảo chiều cao đồng đều cho tất cả cards */
  }


  .feat-title-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
    min-height: 18px; /* Đảm bảo chiều cao tối thiểu cho cả card có/không có badge */
  }

  .feat-badge {
    padding: 1px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 800;
    color: white;
    text-transform: uppercase;
  }
  
  .feat-badge.hot { background: #ff5c00; }
  .feat-badge.mới { background: #ff5c00; }
  .feat-badge.no1 { background: #ff4d4f; }
  .feat-badge.no2, .feat-badge.no3, .feat-badge.no4 { background: #718096; }
  
  .feat-title-text {
    font-size: 12px;
    font-weight: 700;
    color: #2d3748;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
  }
  
  .feat-desc {
    font-size: 11px;
    color: #718096;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
  }
  
  /* Trending Tags */
  .trending-tags {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
    position: relative;
    z-index: 2;
  }
  
  .trending-label {
    opacity: 0.8;
    font-size: 0.85em;
    font-weight: 600;
  }
  
  .trending-tag {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 15px;
    background: rgba(255,255,255,0.15);
    border-radius: 8px;
    color: white;
    text-decoration: none;
    font-size: 0.85em;
    transition: all 0.2s;
    backdrop-filter: blur(5px);
  }
  
  .trending-tag:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-2px);
  }
  
  .tag-badge {
    padding: 1px 4px;
    border-radius: 4px;
    font-size: 0.7em;
    font-weight: 800;
    background: #ff5c00;
    color: white;
  }
  
  .tag-badge.hot { background: #ff5c00; }
  .tag-badge.rec { background: #facc15; }
  
  
  @keyframes fadeInRight {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  .ticker-label {
    color: #ff5c00;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 5px;
    padding-right: 15px;
    border-right: 1px solid #edf2f7;
  }
  
  .ticker-content {
    flex: 1;
    color: #2d3748;
    font-weight: 500;
  }
  
  .ticker-more {
    color: #64748b; /* Darker for contrast */
    text-decoration: none;
    font-size: 0.9em;
    transition: color 0.2s;
  }
  
  .ticker-more:hover {
    color: #3459e6;
  }
  /* ===== CATEGORY SECTIONS ===== */
  .category-section {
    max-width: 1400px;
    margin: 0 auto 21px; /* Further reduced by 35% (32px -> 21px) */
    padding: 0 20px;
  }
  
  .category-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 2px solid #edf2f7;
    padding-bottom: 12px;
  }
  
  .category-header {
    font-size: 1.4em;
    font-weight: 700;
    color: #2d3748;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .view-more {
    font-size: 0.85em;
    color: #64748b; /* Darker for contrast */
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s;
  }
  
  .view-more:hover {
    color: #667eea;
    transform: translateX(4px);
  }
  
  /* ===== GRID ===== */
  .tools-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 12px;
    margin-bottom: 40px;
  }
  
  @media (max-width: 1600px) {
    .tools-grid { grid-template-columns: repeat(5, 1fr); }
  }
  @media (max-width: 1400px) {
    .tools-grid { grid-template-columns: repeat(4, 1fr); }
  }
  @media (max-width: 1100px) {
    .tools-grid { grid-template-columns: repeat(3, 1fr); }
  }
  @media (max-width: 768px) {
    .tools-grid { grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 480px) {
    .tools-grid { grid-template-columns: 1fr; }
  }
  
  /* ===== CARDS - MINIMALIST HORIZONTAL LAYOUT ===== */
  .tool-card {
    background: white;
    border-radius: 16px;
    padding: 18px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 16px;
    border: 1px solid #f0f2f5;
    position: relative;
    height: 96px; 
    text-decoration: none;
    overflow: hidden;
  }
  
  .tool-card:hover {
    overflow: visible;
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(52, 89, 230, 0.1);
    border-color: #3459e6;
    background: #ffffff;
    z-index: 100;
  }
  
  .tool-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    background: #f8fafc;
    flex-shrink: 0;
    border: 1px solid #f1f5f9;
  }
  
  .tool-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
    justify-content: center;
  }
  
  .tool-title {
    font-size: 1.05em;
    font-weight: 800;
    color: #1a202c;
    line-height: 1.2;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .tool-card-body {
    flex-grow: 1;
    min-width: 0;
  }
  
  .tool-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.6em;
    font-weight: 700;
    text-transform: uppercase;
    color: white;
    z-index: 2;
  }
  
  .tool-badge.hot {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
  }
  
  .tool-badge.new {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }
  
  .tool-badge.popular {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  }
  
  .tool-description {
    color: #4a5568; /* Darker Slate 600 */
    font-size: 0.85em;
    line-height: 1.4;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-weight: 500;
  }
  
  /* ===== HOVER TOOLTIP ===== */
  .tool-tooltip {
    position: absolute;
    bottom: calc(100% + 12px);
    left: 50%;
    transform: translateX(-50%);
    background: #1a202c;
    color: white;
    padding: 12px 16px;
    border-radius: 10px;
    font-size: 0.85em;
    line-height: 1.6;
    width: max-content;
    max-width: 320px;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }
  
  .tool-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 8px solid transparent;
    border-top-color: #1a202c;
  }
  
  @media (min-width: 768px) {
    .tool-card:hover .tool-tooltip {
      opacity: 1;
      bottom: calc(100% + 8px);
    }
  }
  
  @media (max-width: 767px) {
    .tool-tooltip {
      display: none;
    }
    /* Refined Mobile Layout */
    .tool-card {
      padding: 10px;
      min-height: 80px;
      height: auto;
      gap: 10px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }
    .tool-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
    }
    .tool-title {
      font-size: 0.85em;
      font-weight: 800;
      white-space: normal;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-height: 1.2;
      margin-bottom: 2px;
      word-break: break-word;
      overflow-wrap: break-word;
    }
    .tool-description {
      font-size: 0.68em;
      line-height: 1.2;
      -webkit-line-clamp: 1;
    }
    .tool-badge {
      top: 6px;
      right: 6px;
      padding: 1px 5px;
      font-size: 0.55em;
      border-radius: 3px;
    }
  }
  
  .tool-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    justify-content: center;
    margin-top: auto;
  }
  
  .tag {
    padding: 3px 10px;
    background: #edf2f7;
    color: #4a5568;
    border-radius: 12px;
    font-size: 0.7em;
    font-weight: 600;
  }
  
  .tag.free {
    background: #c6f6d5;
    color: #22543d;
  }
  
  .tag.cn {
    background: #fef3c7;
    color: #92400e;
  }
  
  .tag.en {
    background: #dbeafe;
    color: #1e40af;
  }
  
  /* ===== LOADING & NO RESULTS ===== */
  .loading {
    text-align: center;
    padding: 60px 20px;
    font-size: 1.2em;
    color: #718096;
  }
  
  .no-results {
    text-align: center;
    padding: 80px 20px;
    color: #64748b; /* Darker for contrast */
  }
  
  .no-results h3 {
    font-size: 1.8em;
    margin-bottom: 10px;
  }
  
  /* ===== AI-BOT DETAIL VIEW ===== */
  .detail-inpage {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    animation: fadeInUp 0.4s ease-out;
  }
  
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .detail-back-bar {
    margin-bottom: 20px;
  }
  
  .detail-back-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: #718096;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95em;
    transition: color 0.2s;
  }
  
  .detail-back-link:hover {
    color: #3459e6;
  }
  
  .detail-header-card {
    background: white;
    border-radius: 24px;
    padding: 30px 40px;
    display: flex;
    gap: 40px;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 10px 40px rgba(0,0,0,0.03);
    margin-bottom: 30px;
    border: 1px solid #edf2f7;
  }
  
  .detail-header-main {
    display: flex;
    gap: 30px;
    align-items: flex-start;
    flex: 1;
  }
  
  .detail-logo-img {
    width: 140px;
    height: 140px;
    border-radius: 24px;
    object-fit: cover;
    box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    flex-shrink: 0;
    border: 1px solid #f1f5f9;
    padding: 5px;
    background: white;
  }
  
  .detail-header-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .detail-preview-box {
    width: 380px;
    flex-shrink: 0;
    position: relative;
  }
  
  .detail-hero-img {
    width: 100%;
    border-radius: 16px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    transition: transform 0.3s;
  }
  
  .detail-hero-img:hover {
    transform: scale(1.02);
  }

  .detail-cat-row {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    flex-wrap: wrap;
  }
  
  .detail-cat-tag {
    padding: 4px 12px;
    background: #f1f5f9;
    color: #475569;
    border-radius: 8px;
    font-size: 0.8em;
    font-weight: 700;
  }
  
  .detail-main-title {
    font-size: 2.2em;
    font-weight: 900;
    color: #1a202c;
    margin: 0 0 10px 0;
    line-height: 1.2;
  }
  
  .detail-main-slogan {
    font-size: 1.1em;
    line-height: 1.6;
    color: #4a5568;
    margin-bottom: 20px;
    font-weight: 500;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .detail-meta-row {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
    color: #718096;
    font-size: 0.85em;
    font-weight: 600;
  }
  
  .meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .detail-actions-row {
    display: flex;
    gap: 15px;
    align-items: center;
  }
  
  .primary-action-btn {
    padding: 14px 35px;
    background: #ff5c00;
    color: white;
    text-decoration: none;
    border-radius: 12px;
    font-weight: 800;
    font-size: 1.05em;
    box-shadow: 0 8px 20px rgba(255, 92, 0, 0.3);
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  
  .primary-action-btn:hover {
    background: #e65200;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 92, 0, 0.4);
  }
  
  .secondary-action-btn {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    background: #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #475569;
    font-size: 1.2em;
    text-decoration: none;
    transition: all 0.2s;
  }
  
  .secondary-action-btn:hover {
    background: #e2e8f0;
    color: #1e293b;
  }

  /* Redesigned Detail Header */
  .detail-header-new {
    display: flex;
    gap: 50px;
    margin-bottom: 40px;
    background: transparent;
  }
  /* Detail Header - Left Card (Minimal Reference Style) */
  .header-left-card {
    flex: 0 0 280px;
    background: #f8f9fa;
    border-radius: 12px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 0;
    position: relative;
  }
  
  .visual-container {
    position: relative;
    width: 100%;
    border-radius: 10px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  
  .main-visual {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }
  
  .visual-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #5c7cfa;
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
  }
  
  .visual-interactions {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 30px;
    padding: 12px 0;
    background: transparent;
  }
  
  .interaction-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }
  
  .interaction-item .icon {
    font-size: 1.5rem;
    filter: grayscale(0.3);
  }
  
  .interaction-item .count {
    font-size: 0.9rem;
    font-weight: 700;
    color: #2d3748;
  }

  .header-right-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .category-chip {
    background: #4361ee;
    color: white;
    padding: 5px 15px;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 700;
    margin-bottom: 20px;
    display: inline-block;
  }

  .detail-new-title {
    font-size: 3rem;
    font-weight: 900;
    color: #1a202c;
    margin-bottom: 20px;
    letter-spacing: -1px;
  }

  .detail-new-slogan {
    font-size: 1.2rem;
    color: #4a5568;
    line-height: 1.6;
    margin-bottom: 15px;
    max-width: 600px;
  }

  .tag-label-line {
    font-size: 0.95rem;
    color: #718096;
    margin-bottom: 25px;
  }

  .action-buttons-group {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
  }

  .visit-btn-new {
    background: #edf2f7;
    color: #4a5568;
    padding: 12px 30px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: 0.2s;
  }

  .visit-btn-new:hover { background: #e2e8f0; color: #1a202c; }

  .security-btn-new {
    width: 50px;
    height: 50px;
    background: #edf2f7;
    color: #718096;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: 0.2s;
  }

  .related-links-row {
    font-size: 0.95rem;
    color: #1a202c;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .related-link-item {
    color: #718096;
    text-decoration: none;
    transition: 0.2s;
  }

  .related-link-item:hover { color: #4361ee; text-decoration: underline; }


  /* ===== POST DETAIL HEADER - 3 COLUMN COMPACT ===== */
  .detail-header-new {
    display: grid;
    grid-template-columns: 120px 1fr 280px;
    align-items: center; /* Center all cells vertically */
    gap: 24px;
    padding: 30px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    margin-bottom: 30px;
  }

  /* Column 1: Visual Compact */
  .header-visual-compact {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  .compact-thumbnail {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #f8fafc;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  .interaction-stats {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 10px 8px;
    background: #f8f9fa;
    border-radius: 12px;
    width: 80px;
    border: 1px solid #edf2f7;
  }

  .stat-item {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #4a5568;
  }

  /* Column 2: Main Content */
  .header-content-main {
    display: flex;
    flex-direction: column;
    gap: 12px;
    justify-content: center;
  }

  .tag-badges {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .badge-chip {
    background: #e0e7ff;
    color: #4f46e5;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
  }

  .badge-chip.free {
    background: #dcfce7;
    color: #16a34a;
  }

  .compact-title {
    font-size: 1.5rem;
    font-weight: 800;
    line-height: 1.3;
    color: #1a202c;
    margin: 0;
  }

  .compact-description {
    font-size: 0.9rem;
    color: #64748b;
    line-height: 1.5;
    margin: 0;
  }

  .action-group {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .primary-action-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s;
    font-size: 0.9rem;
  }

  .primary-action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
  }

  .security-badge {
    background: #f0fdf4;
    border: 1px solid #86efac;
    color: #16a34a;
    width: 38px;
    height: 38px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 1.1rem;
  }

  .security-badge:hover {
    background: #dcfce7;
  }

  .link-section {
    font-size: 0.85rem;
    color: #64748b;
  }

  .link-section a {
    color: #4f46e5;
    text-decoration: none;
    font-weight: 600;
  }

  .link-section a:hover {
    text-decoration: underline;
  }

  /* Column 3: Promo Card */
  .header-promo-card {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
    border: 1px solid #e2e8f0;
  }

  .promo-tag {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 0.75rem;
    color: #94a3b8;
  }

  .promo-icon {
    width: 48px;
    height: 48px;
    border-radius: 8px;
    object-fit: cover;
  }

  .header-promo-card h4 {
    font-size: 0.95rem;
    font-weight: 700;
    margin: 0;
    color: #1a202c;
    line-height: 1.3;
  }

  .promo-desc {
    font-size: 0.8rem;
    color: #64748b;
    line-height: 1.4;
    margin: 0;
  }

  .promo-source {
    font-size: 0.7rem;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .promo-cta-btn {
    background: #4f46e5;
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    text-align: center;
    font-weight: 700;
    font-size: 0.85rem;
    text-decoration: none;
    transition: all 0.2s;
  }

  .promo-cta-btn:hover {
    background: #4338ca;
  }

  /* Responsive Design for 3-column layout */
  @media (max-width: 1024px) {
    .detail-header-new {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .header-visual-compact {
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    
    .interaction-stats {
      flex-direction: row;
      width: auto;
      gap: 15px;
      padding: 6px 15px;
    }
    
    .header-promo-card {
      display: none;
    }
    
    .compact-title {
      font-size: 1.8rem;
      text-align: center;
    }
    
    .compact-description {
      text-align: center;
    }
    
    .tag-badges {
      justify-content: center;
    }
    
    .action-group {
      justify-content: center;
    }
    
    .link-section {
      text-align: center;
    }
    
    .meta-tags {
      text-align: center;
    }
  }

  
  .detail-body-card {
    background: white;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.02);
  }
  
  .detail-section-title {
    font-size: 1.5em;
    font-weight: 700;
    color: #2d3748;
    margin: 0 0 25px 0;
    padding-bottom: 15px;
    border-bottom: 2px solid #f8fafc;
  }
  
  .detail-full-text {
    line-height: 1.9;
    color: #4a5568;
    font-size: 1.05em;
  }
  
  .detail-full-text p {
    margin-bottom: 24px;
    line-height: 1.9;
  }
  
  .detail-full-text h2,
  .detail-full-text h3,
  .detail-full-text h4 {
    margin-top: 32px;
    margin-bottom: 16px;
    font-weight: 700;
    color: #2d3748;
  }
  
  .detail-full-text h2 {
    font-size: 1.5em;
    border-bottom: 2px solid #f0f2f5;
    padding-bottom: 8px;
  }
  
  .detail-full-text h3 {
    font-size: 1.3em;
  }
  
  .detail-full-text h4 {
    font-size: 1.15em;
  }
  
  .detail-full-text ul,
  .detail-full-text ol {
    margin-left: 24px;
    margin-bottom: 20px;
  }
  
  .detail-full-text li {
    margin-bottom: 8px;
    line-height: 1.8;
  }
  
  .detail-full-text strong {
    font-weight: 700;
    color: #2d3748;
  }
  
  .detail-full-text a {
    color: #4f46e5;
    text-decoration: underline;
  }
  
  .detail-full-text a:hover {
    color: #4338ca;
  }
  
  .detail-full-text code {
    background: #f1f5f9;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
  }
  
  .detail-full-text blockquote {
    border-left: 4px solid #4f46e5;
    padding-left: 16px;
    margin: 20px 0;
    color: #64748b;
    font-style: italic;
  }
  
  /* ===== RELATED TOOLS SECTION ===== */
  .related-grid-new {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-top: 20px;
  }
  
  .related-card-mini {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    padding: 20px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s;
    cursor: pointer;
    overflow: hidden;
  }
  
  .related-card-mini:hover {
    border-color: #4f46e5;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.1);
    transform: translateY(-2px);
  }
  
  .related-card-mini img {
    width: 56px;
    height: 56px;
    border-radius: 10px;
    object-fit: cover;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }
  
  .related-mini-info {
    flex: 1;
    min-width: 0;
    max-width: 100%;
  }
  
  .related-mini-info h4 {
    margin: 0 0 6px 0;
    font-size: 0.95rem;
    font-weight: 700;
    color: #1a202c;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    word-break: break-word;
  }
  
  .related-mini-info p {
    margin: 0;
    font-size: 0.85rem;
    color: #64748b;
    line-height: 1.5;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    word-break: break-word;
  }
  
  /* Responsive for Related Tools */
  @media (max-width: 1024px) {
    .related-grid-new {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 640px) {
    .related-grid-new {
      grid-template-columns: 1fr;
    }
    
    .related-card-mini {
      padding: 16px;
    }
  }
  
  @media (max-width: 1024px) {
    .detail-header-card {
      flex-direction: column;
      gap: 30px;
      padding: 30px;
    }
    
    .detail-header-main {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .detail-preview-box {
      width: 100%;
    }

    .detail-logo-img {
      width: 80px;
      height: 80px;
    }

    .detail-body-card {
      padding: 20px;
      border-radius: 12px;
    }

    .promo-banners-row {
      flex-direction: column;
    }

    .featured-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 768px) {
    .featured-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .featured-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    .featured-header-left {
      width: 100%;
      justify-content: space-between;
      flex-wrap: nowrap;
      align-items: center;
      order: 2; /* Đẩy xuống dưới */
    }
    .featured-header-right {
      width: 100%;
      justify-content: flex-start;
      margin-top: 0;
      order: 1; /* Đẩy lên trên */
    }
    .inline-news-ticker {
      max-width: 100%;
      flex: 1;
      margin-right: 0;
      padding: 8px 12px;
    }
    .featured-title {
      font-size: 1.2em;
      white-space: nowrap;
    }
    .featured-badge-btn {
      flex-shrink: 0;
    }
    
    .news-ticker-wrapper {
      justify-content: center;
      padding: 0 10px;
    }
    
    .news-ticker-bar {
      width: 100%;
      flex-wrap: wrap;
      justify-content: center;
      border-radius: 12px;
    }
  }

  @media (max-width: 768px) {
    .featured-grid {
      display: flex !important;
      flex-direction: column !important;
      gap: 10px !important;
    }
    
    .featured-card {
      flex-direction: row !important;
      border: 1px solid #e2e8f0 !important;
      padding: 0 !important;
      min-height: 75px !important;
      border-radius: 10px !important;
    }
    
    .feat-img-box {
      width: 100px !important;
      min-width: 100px !important;
      flex-shrink: 0 !important;
      order: 1 !important;
      border-radius: 10px 0 0 10px !important;
    }
    
    .feat-info {
      flex: 1 !important;
      order: 2 !important;
      padding: 10px !important;
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
      align-items: flex-start !important;
      min-height: auto !important;
    }
    
    .feat-title-row {
      flex-direction: row !important;
      align-items: flex-start !important;
      gap: 6px !important;
      margin-bottom: 0 !important;
      flex-wrap: wrap !important;
    }
    
    .feat-badge {
      flex-shrink: 0 !important;
      font-size: 9px !important;
      padding: 2px 5px !important;
    }
    
    .feat-title-text {
      font-size: 14px !important;
      line-height: 1.4 !important;
      font-weight: 600 !important;
      flex: 1 !important;
      white-space: normal !important;
      display: block !important;
    }
    
    .feat-desc {
      display: none !important;
    }
    
    .featured-section {
      padding: 15px;
    }
    .featured-header {
      gap: 10px;
    }
    .featured-title {
      font-size: 1.1em;
    }
    .featured-badge-btn {
      padding: 3px 10px;
      font-size: 11px;
    }
    .inline-news-ticker {
      padding: 4px 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.02);
      width: 100%;
      margin: 8px 0;
    }
    .ticker-text {
      font-size: 11px;
    }
    
    .promo-banner {
      padding: 0 20px;
      height: 90px;
    }
    
    .promo-text h4 {
      font-size: 1em;
    }
    
    .detail-main-title {
      font-size: 1.8em;
    }
  }

  /* Post Detail Footer Components */
  .detail-footer-banner {
    width: 100%;
    margin: 30px 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  .detail-footer-banner img { width: 100%; display: block; }

  .related-grid-new {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 40px;
  }
  
  .related-card-mini {
    background: #fff;
    padding: 15px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 15px;
    text-decoration: none;
    border: 1px solid #f0f2f5;
    transition: 0.3s;
  }
  .related-card-mini:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.05); border-color: #4361ee; }
  .related-card-mini img { width: 45px; height: 45px; border-radius: 10px; object-fit: cover; }
  .related-mini-info h4 { margin: 0; font-size: 1rem; color: #1a202c; font-weight: 700; }
  .related-mini-info p { margin: 2px 0 0 0; font-size: 0.8rem; color: #718096; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

  .comments-container-new {
    background: #fff;
    padding: 40px;
    border-radius: 20px;
    margin-top: 30px;
  }
  .comments-header-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 25px;
    font-size: 1.2rem;
    font-weight: 700;
    color: #1a202c;
  }
  .comment-form { display: flex; flex-direction: column; gap: 15px; }
  .comment-form textarea {
    width: 100%;
    height: 120px;
    padding: 15px;
    border-radius: 12px;
    border: 1px solid #edf2f7;
    background: #f8fafc;
    font-family: inherit;
    font-size: 0.95rem;
    outline: none;
    resize: none;
  }
  .comment-inputs-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }
  .comment-inputs-row input {
    padding: 12px 15px;
    border-radius: 8px;
    border: 1px solid #edf2f7;
    background: #f8fafc;
    font-size: 0.9rem;
    outline: none;
  }
  .comment-submit-btn {
    align-self: flex-end;
    background: #5c7cfa;
    color: white;
    padding: 12px 30px;
    border-radius: 8px;
    font-weight: 700;
    border: none;
    cursor: pointer;
    transition: 0.2s;
  }
  .comment-submit-btn:hover { background: #4c6ef5; }

  @media (max-width: 768px) {
    .related-grid-new { grid-template-columns: 1fr; }
    .comment-inputs-row { grid-template-columns: 1fr; }
  }
  
  /* ===== UISDC FOOTER ===== */
  .footer-wrapper {
    margin-top: 50px;
    font-family: inherit;
  }
  
  .footer-tip-bar {
    background: #4169e1;
    padding: 15px 20px;
    color: white;
  }
  
  .footer-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
  }
  
  .footer-tip-left {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9em;
  }
  
  .keycap {
    background: white;
    color: #4169e1;
    padding: 4px 12px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 0.85em;
    box-shadow: 0 2px 0 rgba(0,0,0,0.1);
  }
  
  .tip-text {
    opacity: 0.9;
    margin-left: 10px;
  }
  
  .footer-tip-right {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  
  .social-icons-row {
    display: flex;
    gap: 12px;
  }
  
  .social-icon {
    width: 32px;
    height: 32px;
    background: rgba(255,255,255,0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-decoration: none;
    transition: all 0.2s;
    font-size: 1.1em;
  }
  
  .social-icon:hover {
    background: white;
    color: #4169e1;
    transform: translateY(-2px);
  }
  
  .footer-bottom-bar {
    background: #2d3dcc;
    padding: 25px 20px;
    color: rgba(255,255,255,0.7);
    font-size: 0.85em;
  }
  
  .footer-bottom-content {
    max-width: 1400px;
    margin: 0 auto;
    text-align: center;
  }
  
  .footer-legal-links {
    margin-bottom: 15px;
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  
  .footer-legal-link {
    color: rgba(255,255,255,0.8);
    text-decoration: none;
    transition: color 0.2s;
  }
  
  .footer-legal-link:hover {
    color: white;
  }
  
  .copyright-row {
    opacity: 0.6;
    margin-top: 10px;
  }
  
  @media (max-width: 768px) {
    .footer-container {
      flex-direction: column;
      gap: 15px;
      text-align: center;
    }
    .footer-tip-left {
      flex-wrap: wrap;
      justify-content: center;
    }
  }
  
  /* ===== POST DETAIL PAGE ===== */
  .post-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  /* Post Hero Section */
  .post-hero {
    background: linear-gradient(135deg, #667eea 0%, #64d6d0 100%);
    border-radius: 16px;
    padding: 40px;
    margin-bottom: 30px;
    display: flex;
    gap: 30px;
    align-items: center;
    position: relative;
    overflow: hidden;
  }
  
  .post-hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 400px;
    height: 400px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
  }
  
  .post-hero-image {
    width: 300px;
    height: 200px;
    border-radius: 12px;
    object-fit: cover;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    flex-shrink: 0;
    position: relative;
    z-index: 2;
  }
  
  .post-hero-content {
    flex: 1;
    position: relative;
    z-index: 2;
  }
  
  .post-category-tags {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
  }
  
  .post-category-tag {
    padding: 4px 12px;
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    color: white;
    font-size: 0.8em;
    font-weight: 600;
  }
  
  .post-title {
    font-size: 2.2em;
    font-weight: 700;
    color: white;
    margin-bottom: 15px;
    line-height: 1.2;
  }
  
  .post-description {
    font-size: 1.1em;
    color: rgba(255,255,255,0.95);
    margin-bottom: 20px;
    line-height: 1.6;
  }
  
  .post-meta-info {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  
  .post-meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgba(255,255,255,0.9);
    font-size: 0.9em;
  }
  
  .post-rating {
    color: #ffd700;
  }
  
  .post-cta-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 14px 32px;
    background: white;
    color: #667eea;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1em;
    transition: all 0.3s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .post-cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  }
  
  /* Tab Navigation */
  .post-tabs {
    display: flex;
    gap: 5px;
    border-bottom: 2px solid #e2e8f0;
    margin-bottom: 30px;
    overflow-x: auto;
  }
  
  .post-tab {
    padding: 12px 24px;
    background: transparent;
    border: none;
    color: #4a5568;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 3px solid transparent;
    white-space: nowrap;
  }
  
  .post-tab:hover {
    color: #667eea;
  }
  
  .post-tab.active {
    color: #667eea;
    border-bottom-color: #667eea;
  }
  
  /* Content Sections */
  .post-content {
    background: white;
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .post-content h2 {
    font-size: 1.5em;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 3px solid #667eea;
    display: inline-block;
  }
  
  .post-content h3 {
    font-size: 1.2em;
    font-weight: 700;
    color: #2d3748;
    margin-top: 25px;
    margin-bottom: 15px;
  }
  
  .post-content p {
    line-height: 1.8;
    color: #4a5568;
    margin-bottom: 15px;
  }
  
  .post-content ul,
  .post-content ol {
    margin-left: 25px;
    margin-bottom: 15px;
  }
  
  .post-content li {
    line-height: 1.8;
    color: #4a5568;
    margin-bottom: 8px;
  }
  
  .post-content strong,
  .post-content b,
  .static-body strong,
  .static-body b,
  .detail-full-text strong,
  .detail-full-text b {
    color: #1e3a8a;
    font-weight: 700;
    background: linear-gradient(120deg, #dbeafe 0%, #e0e7ff 100%);
    padding: 2px 6px;
    border-radius: 4px;
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
  }
  
  /* Alternative style for emphasis - subtle underline */
  .post-content em,
  .static-body em,
  .detail-full-text em {
    color: #4338ca;
    font-style: italic;
    border-bottom: 2px solid #c7d2fe;
  }
  
  /* Features List */
  .features-list {
    display: grid;
    gap: 15px;
  }
  
  .feature-item {
    display: flex;
    gap: 12px;
    padding: 15px;
    background: #f7fafc;
    border-radius: 8px;
    border-left: 4px solid #667eea;
  }
  
  .feature-icon {
    font-size: 1.5em;
    flex-shrink: 0;
  }
  
  .feature-content strong {
    color: #2d3748;
    display: block;
    margin-bottom: 5px;
  }
  
  /* Screenshots Gallery */
  .screenshots-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
    margin: 20px 0;
  }
  
  .screenshot-item {
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .screenshot-item img {
    width: 100%;
    height: auto;
    display: block;
  }
  
  /* Note/Warning Box */
  .note-box {
    background: #fef3c7;
    border-left: 4px solid #f59e0b;
    padding: 15px 20px;
    border-radius: 8px;
    margin: 20px 0;
  }
  
  .note-box p {
    color: #92400e;
    margin: 0;
  }
  
  /* Related Tools Section */
  .related-tools-section {
    background: white;
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .related-tools-section h2 {
    font-size: 1.5em;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 3px solid #667eea;
    display: inline-block;
  }
  
  .related-tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 15px;
  }
  
  /* Comments Section */
  .comments-section {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .comments-section h2 {
    font-size: 1.5em;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 20px;
  }
  
  /* Post Detail Modal */
  .post-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 10000;
  }
  
  .post-modal.active {
    display: block;
  }
  
  .post-detail-container {
    position: fixed;
    top: 0;
    right: -600px;
    width: 600px;
    height: 100%;
    background: white;
    overflow-y: auto;
    transition: right 0.3s ease;
    z-index: 10001;
    box-shadow: -4px 0 20px rgba(0,0,0,0.2);
  }
  
  .post-modal.active .post-detail-container {
    right: 0;
  }
  
  .post-modal-close {
    position: absolute;
    top: 15px;
    left: 15px;
    width: 36px;
    height: 36px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10002;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  
  .post-modal-close:hover {
    background: #f7fafc;
    transform: scale(1.1);
  }
  
  /* ===== FLOATING POPUP BANNERS ===== */
  .floating-popups {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: flex-end;
  }
  
  /* Circular Icon Menu */
  .popup-icon-menu {
    position: relative;
  }
  
  .popup-main-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
    transition: all 0.3s;
    border: 3px solid white;
  }
  
  .popup-main-icon:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
  }
  
  .popup-menu-icon-text {
    color: white;
    font-size: 28px;
    font-weight: bold;
    line-height: 1;
  }
  
  .popup-menu-items {
    position: absolute;
    bottom: 70px;
    right: 0;
    background: white;
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    display: none;
    flex-direction: column;
    gap: 8px;
    min-width: 100px;
  }
  
  .popup-menu-items.active {
    display: flex;
    animation: slideUp 0.3s ease;
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .popup-menu-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.2s;
    text-decoration: none;
    color: #4a5568;
  }
  
  .popup-menu-item:hover {
    background: #f7fafc;
  }
  
  .popup-menu-item-icon {
    font-size: 24px;
    margin-bottom: 4px;
  }
  
  .popup-menu-item-text {
    font-size: 12px;
    text-align: center;
    white-space: nowrap;
  }
  
  /* Event Banner (Single) */
  .popup-banner {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    position: relative;
    animation: slideIn 0.3s ease;
    max-width: 380px;
  }
  
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  .popup-close {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 24px;
    height: 24px;
    background: transparent;
    border: none;
    color: #64748b; /* Darker for contrast */
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .popup-close:hover {
    color: #4a5568;
  }
  
  .popup-image {
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 12px;
  }
  
  .popup-title {
    font-size: 1em;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 8px;
    line-height: 1.4;
  }
  
  .popup-meta {
    display: flex;
    gap: 10px;
    align-items: center;
  }
  
  .popup-date {
    padding: 4px 12px;
    background: #2d3748;
    color: white;
    border-radius: 20px;
    font-size: 0.8em;
  }
  
  .popup-button {
    padding: 4px 16px;
    background: transparent;
    border: 1px solid #2d3748;
    border-radius: 20px;
    color: #2d3748;
    cursor: pointer;
    transition: all 0.2s;
  }

  .popup-button:hover {
    background: #2d3748;
    color: white;
  }

  /* Category Section & Headers - Badge Style */
  .category-section {
    margin-bottom: 50px;
  }
  
  .category-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid #f0f2f5;
  }
  
  .category-header {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.82rem;
    font-weight: 700;
    color: white;
    margin: 0;
    background: #5c7cfa;
    padding: 5px 16px;
    border-radius: 50px;
    border: 2px solid #cbd5e0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  
  .category-icon {
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
  }
  
  .view-more {
    color: #5c7cfa;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    transition: 0.2s;
    white-space: nowrap;
  }
  .view-more:hover { 
    color: #4c6ef5; 
    text-decoration: underline;
  }

  /* ===== FEATURED SECTION (ACADEMY) ===== */
  .featured-section {
    max-width: 1400px;
    margin: 30px auto;
    padding: 0 20px;
  }
  
  .featured-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  .featured-title {
    font-size: 1.5em;
    font-weight: 700;
    color: #2d3748;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .daily-update-badge {
    font-size: 0.6em;
    padding: 4px 12px;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    color: white;
    border-radius: 20px;
    font-weight: 700;
    box-shadow: 0 4px 10px rgba(238, 90, 111, 0.3);
  }
  
  .featured-more {
    font-size: 0.85em;
    color: #64748b; /* Darker for contrast */
    text-decoration: none;
    font-weight: 600;
  }
  
  .featured-list {
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* Matching main grid */
    gap: 15px;
  }
  
  @media (max-width: 1400px) {
    .featured-list { grid-template-columns: repeat(5, 1fr); }
  }
  @media (max-width: 1200px) {
    .featured-list { grid-template-columns: repeat(4, 1fr); }
  }
  @media (max-width: 900px) {
    .featured-list { grid-template-columns: repeat(2, 1fr); gap: 10px; }
  }
  @media (max-width: 600px) {
    .featured-list { grid-template-columns: repeat(2, 1fr); gap: 8px; }
  }
  
  .featured-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    transition: all 0.3s;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    height: 100%;
    border: 1px solid #f0f2f5;
  }
  
  .featured-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.1);
  }
  
  .featured-card-img {
    width: 100%;
    height: 80px; /* Reduced height to fit 6 columns */
    object-fit: cover;
    border-bottom: 1px solid #f0f2f5;
  }
  
  .featured-card-content {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex-grow: 1;
  }
  
  .featured-card-tag {
    font-size: 0.65em;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 5px;
    width: fit-content;
    text-transform: uppercase;
  }
  
  .tag-hot { background: #fee2e2; color: #ef4444; }
  .tag-rec { background: #fef3c7; color: #f59e0b; }
  .tag-new { background: #d1fae5; color: #10b981; }
  
  .featured-card-title {
    font-size: 1em;
    font-weight: 700;
    color: #2d3748;
    margin: 0;
    line-height: 1.3;
  }
  
  .featured-card  .tool-description, .featured-card-desc, .tool-description {
    font-size: 0.8em;
    color: #718096;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 1; /* Strictly 1 line limit */
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.5;
    text-align: left;
  }
  
  /* ===== BANNER SECTION ===== */
  .banner-section {
    max-width: 1400px;
    margin: 0 auto 30px;
    padding: 0 20px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  
  @media (max-width: 900px) {
    .banner-section { grid-template-columns: 1fr; }
  }
  
  .promo-banner {
    height: 70px;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    padding: 0 20px;
    text-decoration: none;
    transition: all 0.3s;
    background: #000;
  }
  
  .promo-banner:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }
  
  .promo-banner-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.6;
    z-index: 1;
  }
  
  .promo-content {
    position: relative;
    z-index: 2;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
  }
  
  .promo-text {
    color: white;
  }
  
  .promo-title {
    font-size: 1.1em;
    font-weight: 700;
  }
  
  .promo-desc {
    font-size: 0.8em;
    opacity: 0.8;
  }
  
  .promo-btn {
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: 700;
    color: white;
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
  }
  
  .promo-btn.alt {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    box-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);
  }
  
  .promo-btn.blue {
    background: linear-gradient(90deg, #4834d4, #686de0);
  }

  /* Comments Styling */
  .comments-container-new {
    margin-top: 40px;
    background: #f8f9fa;
    border-radius: 12px;
    padding: 25px;
  }
  
  .comments-header-row {
    display: flex;
    justify-content: flex-start; /* Thu gọn vào 1 bên */
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid #edf2f7;
  }
  
  .comments-title {
    font-size: 1.15rem;
    font-weight: 800;
    color: #1a202c;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .toggle-comments-btn {
    background: #edf2f7;
    color: #4a5568;
    border: 1px solid #e2e8f0;
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .toggle-comments-btn:hover {
    background: #4f46e5;
    color: white;
    border-color: #4f46e5;
  }

  .comments-list {
    display: none; /* Mặc định ẩn */
    margin: 20px 0;
    flex-direction: column;
    gap: 20px;
  }
  
  .comments-list.active {
    display: flex;
  }

  .comment-item {
    display: flex;
    gap: 15px;
    border-bottom: 1px solid #edf2f7;
    padding-bottom: 15px;
  }
  .comment-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }
  .comment-content-box { flex: 1; }
  .comment-meta {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
    font-size: 0.9rem;
  }
  .comment-author { font-weight: 700; color: #2d3748; }
  .comment-date { color: #64748b; /* Darker for better contrast */ font-size: 0.8rem; }
  .comment-text { color: #4a5568; line-height: 1.5; margin: 0; font-size: 0.95rem; }

  @media (max-width: 768px) {
    .banner-section {
      grid-template-columns: 1fr;
    }
    .promo-banner {
      height: 90px;
      padding: 0 15px;
    }
    .promo-title {
      font-size: 1rem;
    }
    .promo-desc {
      font-size: 0.75rem;
      -webkit-line-clamp: 2;
    }
    .promo-btn {
      padding: 5px 12px;
      font-size: 0.75rem;
    }
  }

  
  /* ===== RESPONSIVE ===== */
  @media (max-width: 1024px) {
    .sidebar {
      position: fixed;
      left: -260px;
      top: 0;
      height: 100vh;
      z-index: 999;
      transition: left 0.3s;
    }
    
    .sidebar.active {
      left: 0;
    }
    
    .mobile-menu-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .main-wrapper {
      flex-direction: column;
    }
  }
  
  @media (max-width: 768px) {
    .tool-save-btn {
      display: none !important;
    }
    .tools-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 0 10px;
    }
    
    .site-title {
      font-size: 1.2em;
    }
    
    .category-header {
      font-size: 0.8rem;
      padding: 4px 12px;
    }
    
    
    .header-wrapper {
      position: relative;
    }
    
    .content-area {
      padding-top: 15px !important; /* Set to 15px for mobile as requested */
    }
    
    .top-nav {
      display: none;
    }
    
    .header-container {
      flex-direction: row;
      justify-content: space-between;
      padding: 0 10px; /* Reduced padding */
      gap: 0;
    }
    
    .header-left {
      width: auto;
      justify-content: flex-start;
      gap: 12px;
    }

    .header-menu-toggle {
      display: flex;
    }

    .brand-title {
      font-size: 1.4em;
    }

    .header-right {
      gap: 6px;
    }

    .util-icon {
      width: 32px;
      height: 32px;
      font-size: 16px;
      margin: 0;
    }
    
    .header-menu-toggle {
        width: 48px; /* Increased for accessibility */
        height: 48px;
    }
    
    .dropdown-content {
      padding: 15px 10px !important; /* Tighter padding for mobile */
    }

    .dropdown-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 10px !important;
      padding: 0 !important;
    }
    
    .dropdown-cat-item {
       padding: 14px 12px !important; /* Increased for touch targets */
       font-size: 0.85rem !important;
       gap: 8px !important;
       border-radius: 12px !important;
       min-height: 48px !important;
    }
    
    .dropdown-cat-icon {
       font-size: 1.1rem !important;
    }
    
    .dropdown-header h3 {
       font-size: 1.15rem !important;
    }
    
    .site-desc {
      font-size: 0.9em;
    }
    
    .hero-section {
      padding: 0 !important;
      border-radius: 12px !important;
      margin-top: 0 !important; /* Gap handled by content-area padding */
      margin-bottom: 8px !important; 
    }
    
    .hero-banner-box {
      padding: 30px 20px 40px !important; /* Significantly reduced from 50/70 */
    }
    
    .news-ticker-bar {
      margin-bottom: 15px !important; /* Reduced from 30 */
      padding: 8px 15px !important;
    }
    
    .hero-title {
      font-size: 1.4em;
    }
    
    .search-wrapper {
      margin-bottom: 20px;
    }
    
    #searchInput {
      padding: 16px 80px 16px 20px;
      font-size: 0.95rem;
    }
    
    .search-btn {
      padding: 0 15px;
      font-size: 1rem;
      right: 4px;
      top: 4px;
      bottom: 4px;
    }
    
    .trending-tags {
      font-size: 0.8em;
    }
    
    .search-tabs {
      overflow-x: auto;
      white-space: nowrap;
      justify-content: flex-start;
      padding-bottom: 5px;
      -webkit-overflow-scrolling: touch;
    }

    /* Mobile Detail View Refinements */
    .detail-inpage {
      padding: 15px;
      gap: 20px;
    }

    .detail-back-bar {
      padding: 12px 10px;
      background: white;
      border-radius: 12px;
      margin-bottom: 5px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }

    .detail-back-link {
      font-size: 0.85rem;
      font-weight: 600;
      color: #64748b;
    }

    .detail-header-new {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 30px 20px;
      gap: 20px;
      background: white;
      border-radius: 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.04);
      border: 1px solid #f1f5f9;
    }

    .header-visual-compact {
      flex-direction: column;
      align-items: center;
      gap: 12px !important;
    }

    .compact-thumbnail {
      width: 100px !important;
      height: 100px !important;
      border-radius: 22px !important;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;
    }

    .interaction-stats {
      width: 100%;
      justify-content: center;
      gap: 15px;
      background: #f8fafc;
      padding: 8px 15px;
      border-radius: 100px;
    }

    .header-content-main {
      width: 100%;
      align-items: center;
    }

    .tag-badges {
      justify-content: center;
      margin-bottom: 5px;
    }

    .compact-title {
      font-size: 1.4rem;
      font-weight: 900;
      letter-spacing: -0.5px;
      margin: 5px 0 10px 0;
      word-break: break-word;
    }

    .compact-description {
      text-align: center;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .action-group {
      flex-direction: column;
      width: 100%;
      gap: 12px;
      margin-top: 10px;
    }

    .primary-action-btn {
      width: 100%;
      padding: 14px;
      font-size: 1rem;
      border-radius: 14px;
      justify-content: center;
    }

    .security-badge {
      width: 100%;
      height: 44px;
      border-radius: 12px;
    }

    .detail-body-card {
      padding: 25px 20px;
      border-radius: 20px;
    }

    .detail-section-title {
      font-size: 1.2rem;
      font-weight: 800;
      color: #1e293b;
      position: relative;
      padding-left: 18px;
    }

    .detail-section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 5px;
      height: 22px;
      background: linear-gradient(to bottom, #4f46e5, #818cf8);
      border-radius: 10px;
    }

    .detail-full-text {
      font-size: 1rem;
      line-height: 1.8;
      color: #334155;
    }

    .detail-full-text img {
      border-radius: 16px;
      margin: 20px 0;
    }

    /* Related tools on mobile */
    .related-grid-new {
      gap: 10px;
    }

    .related-card-mini {
      padding: 12px;
      gap: 12px;
      border-radius: 16px;
    }

    .related-card-mini img {
      width: 48px;
      height: 48px;
      border-radius: 12px;
    }

    .related-mini-info h4 {
      font-size: 0.9rem;
    }
    
    .search-tab {
      padding: 6px 12px;
      font-size: 0.85rem;
    }
    
    .tool-thumbnail {
      height: 150px;
    }
    
    .post-detail-container {
      width: 100%;
      right: -100%;
    }
    
    .post-hero {
      flex-direction: column;
      padding: 30px 20px;
    }
    
    .post-hero-image {
      width: 100%;
      height: 180px;
    }
    
    .post-title {
      font-size: 1.6em;
    }
    
    .floating-popups {
      bottom: 20px;
      right: 20px;
      max-width: calc(100% - 40px);
    }
    
    .popup-banner {
      position: fixed;
      left: 15px;
      right: auto;
      bottom: 15px;
      width: 280px;
      padding: 12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
      border: 1px solid #f1f5f9;
      animation: slideInLeft 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideInLeft {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .popup-image {
      height: 90px;
    }

    .popup-title {
      font-size: 0.85rem;
    }

    .popup-button {
      padding: 6px 12px;
      font-size: 0.75rem;
    }
  }
  
  /* ===== STATIC PAGE STYLING ===== */
  .static-page-wrapper {
    display: flex;
    gap: 30px;
    margin-top: 20px;
  }

  .static-content-main {
    flex: 1;
    background: white;
    border-radius: 16px;
    padding: 40px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.04);
    min-width: 0;
  }

  .static-page-header {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #f0f2f5;
    text-align: center;
  }

  .static-title {
    font-size: 2.2rem;
    font-weight: 800;
    color: #1e293b;
    margin-bottom: 10px;
    letter-spacing: -0.5px;
  }

  .static-meta {
    font-size: 0.9rem;
    color: #64748b;
  }

  .static-body {
    font-size: 1.05rem;
    line-height: 1.8;
    color: #334155;
  }

  .static-body h2 { font-size: 1.5rem; margin-top: 30px; margin-bottom: 15px; color: #1e293b; }
  .static-body h3 { font-size: 1.25rem; margin-top: 25px; margin-bottom: 12px; color: #334155; }
  .static-body p { margin-bottom: 15px; }
  .static-body ul { padding-left: 20px; margin-bottom: 20px; }
  .static-body li { margin-bottom: 8px; }

  .static-sidebar-right {
    width: 300px;
    flex-shrink: 0;
  }

  .static-widget {
    background: white;
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.03);
    border: 1px solid #f1f5f9;
  }

  .widget-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .widget-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .widget-item {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    transition: 0.2s;
  }

  .widget-item:hover .widget-text { color: #2d3dcc; }

  .widget-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: #f8fafc;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
  }

  .widget-text {
    font-size: 0.95rem;
    font-weight: 500;
    color: #475569;
    line-height: 1.4;
  }

  @media (max-width: 991px) {
    .static-page-wrapper {
      flex-direction: column;
    }
    .static-sidebar-right {
      width: 100%;
    }
  }
  
  /* ===== HIDE BLOGGER DEFAULTS ===== */
  .blog-posts,
  #Blog1 {
    display: none !important;
  }

  /* Category & Search List View */
  .category-view { padding: 20px 0; }
  .category-header-info { 
    background: #fff; 
    padding: 30px; 
    border-radius: 12px; 
    margin: 20px 0; 
    border-left: 5px solid #2d3dcc;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  }
  .list-view { display: flex; flex-direction: column; gap: 20px; }
  .list-card { 
    display: flex; gap: 25px; background: #fff; border-radius: 12px; padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid #f0f0f0; text-decoration: none; transition: 0.3s;
  }
  .list-card:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(0,0,0,0.08); border-color: #2d3dcc; }
  .list-img-box { flex: 0 0 320px; height: 180px; border-radius: 10px; overflow: hidden; position: relative; }
  .list-img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
  .list-card:hover .list-img-box img { transform: scale(1.05); }
  .list-info { flex: 1; display: flex; flex-direction: column; justify-content: center; }
  .list-title { font-size: 1.4rem; font-weight: 700; color: #1a1a1a; margin-bottom: 12px; line-height: 1.3; }
  .list-desc { font-size: 1rem; color: #555; line-height: 1.6; margin-bottom: 20px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
  .list-footer { display: flex; align-items: center; gap: 20px; font-size: 0.9rem; color: #888; }
  @media (max-width: 991px) {
    .list-img-box { flex: 0 0 250px; }
  }
  @media (max-width: 768px) {
    .list-card { flex-direction: column; }
    .list-img-box { flex: 0 0 auto; width: 100%; height: 200px; }
  }

  /* Trending Section */
  .trending-keywords-section {
    padding: 15px 0 25px 0;
    margin-bottom: 10px;
    border-bottom: 1px solid #f0f0f0;
  }
  .trending-ticker {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.95rem;
    color: #4a5568;
    margin-bottom: 15px;
    padding-left: 5px;
  }
  .ticker-icon { color: #888; font-size: 1.1rem; }
  .trending-tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .trending-tag-pill {
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 0.88rem;
    text-decoration: none;
    transition: 0.2s;
    background: #f7f8fa;
    color: #555;
    border: 1px solid transparent;
  }
  .trending-tag-pill:hover { background: #edf2f7; color: #2d3dcc; border-color: #cbd5e0; }
  .trending-tag-pill.hot {
    background: #fff5f5;
    color: #e53e3e;
    border: 1px solid #fed7d7;
  }
  .trending-tag-pill.hot:hover { background: #feb2b2; }
  /* ===== FOOTER STYLING ===== */
  .footer-wrapper {
    margin-top: 50px;
    background: white;
    border-top: 1px solid #f0f2f5;
    width: 100%;
  }
  
  .footer-tip-bar {
    background: #2d3dcc;
    padding: 20px 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  
  .footer-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  @media (max-width: 768px) {
    .floating-popups {
      bottom: 15px;
      right: 15px;
      gap: 10px;
    }
    .popup-main-icon {
      width: 50px;
      height: 50px;
      border-width: 2px;
    }
    .popup-menu-icon-text {
      font-size: 22px;
    }
    .footer-container {
      flex-direction: column;
      gap: 20px;
      text-align: center;
    }
  
  .footer-tip-left {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9rem;
    color: white;
  }
  
  .keycap {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 4px;
    padding: 2px 8px;
    font-family: monospace;
    font-weight: 700;
    box-shadow: 0 2px 0 rgba(0,0,0,0.05);
  }
  
  .tip-text {
    margin-left: 10px;
    color: rgba(255,255,255,0.9);
  }
  
  .footer-tip-right {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 0.9rem;
    color: white;
  }
  
  .social-icons-row {
    display: flex;
    gap: 12px;
  }
  
  .social-icon {
    font-size: 1.2rem;
    text-decoration: none;
    transition: transform 0.2s;
  }
  
  .social-icon:hover {
    transform: scale(1.1);
  }
  
  .footer-bottom-bar {
    padding: 40px 0;
    background: #2331b2;
    text-align: center;
  }
  
  .footer-bottom-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .footer-legal-links {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 25px;
  }
  
  .footer-legal-link {
    color: rgba(255,255,255,0.8);
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 600;
    transition: color 0.2s;
  }
  
  .footer-legal-link:hover {
    color: white;
  }
  
  .footer-bottom-bar p {
    font-size: 0.85rem;
    color: rgba(255,255,255,0.6);
    margin-bottom: 10px;
  }
  
  .copyright-row {
    font-size: 0.9rem;
    color: rgba(255,255,255,0.8);
    font-style: italic;
  }
  
  @media (max-width: 768px) {
    .footer-container {
      flex-direction: column;
      gap: 20px;
      text-align: center;
    }
    
    .footer-tip-left {
      flex-direction: column;
      gap: 8px;
    }
    
    .footer-legal-links {
      gap: 10px 15px;
    }
  }
  /* Bookmark Button */
  .tool-save-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.2s ease;
    color: #94a3b8; /* Slate 400 - better than 300 */
    padding: 0;
  }
  
  .tool-save-btn:hover {
    transform: scale(1.1);
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .tool-save-btn.active {
    color: #ef4444; /* Red Heart */
    background: #fef2f2;
    border-color: #fee2e2;
  }
  
  .tool-save-btn svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
  }
  /* Skeleton Loading */
  .skeleton-card {
    background: #fff;
    border-radius: 16px;
    padding: 15px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.02);
    border: 1px solid #f1f5f9;
    display: flex;
    flex-direction: column;
    gap: 12px;
    height: 100%;
  }

  .skeleton-image {
    width: 100%;
    height: 140px;
    background: #e2e8f0;
    border-radius: 12px;
    position: relative;
    overflow: hidden;
  }

  .skeleton-title {
    width: 70%;
    height: 24px;
    background: #e2e8f0;
    border-radius: 6px;
    position: relative;
    overflow: hidden;
  }

  .skeleton-desc {
    width: 100%;
    height: 16px;
    background: #e2e8f0;
    border-radius: 4px;
    position: relative;
    overflow: hidden;
  }
  
  .skeleton-desc.short {
    width: 60%;
  }

  /* Shimmer Animation */
  .skeleton-image::after,
  .skeleton-title::after,
  .skeleton-desc::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.4) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  ]]></b:skin>
</head>

<body>
  <!-- HEADER -->
  <header class='header-wrapper'>
    <div class='header-container'>
      <div class='header-left'>

        <a class='site-brand' href='/'>
          <b:if cond='data:view.isHomepage'>
             <h1 class='brand-title'>Việt-AI.online</h1>
          <b:else/>
             <div class='brand-title'>Việt-AI.online</div>
          </b:if>
        </a>
      </div>
      
      <ul class='top-nav'>
        <li><a class='top-nav-link active' href='/'>Thư viện</a></li>
        <li><a class='top-nav-link' href='#'>Khóa học <span class='nav-hot'>H</span></a></li>
        <li><a class='top-nav-link' href='/search/label/Tin tức'>Tin tức</a></li>
        <li><a class='top-nav-link' href='#'>Cộng đồng <span class='nav-hot'>H</span></a></li>
        <li><a class='top-nav-link' href='/p/lien-he.html'>Liên hệ</a></li>
      </ul>
      
      <div class='header-right'>
        <a class='util-icon icon-orange' href='#' title='Messenger' aria-label='Nhắn tin Messenger'>💬</a>
        <a class='util-icon icon-green' href='#' title='WeChat' aria-label='Liên hệ Zalo/Phone'>📱</a>
        <a class='util-icon icon-blue' href='#' title='Đã lưu' aria-label='Công cụ đã lưu' onclick="selectCategory('saved'); return false;">❤️</a>
        
        <!-- Category Toggle (Desktop & Mobile) -->
        <button class='header-menu-toggle' id='headerMenuToggle' title='Danh mục' aria-label='Mở danh mục'>
          <span class='bar'></span>
          <span class='bar'></span>
          <span class='bar'></span>
        </button>
      </div>
    </div>
    
    <!-- MOBILE CATEGORY DROPDOWN -->
    <div class='category-dropdown' id='categoryDropdown'>
      <div class='dropdown-overlay' id='dropdownOverlay'></div>
      <div class='dropdown-content'>
        <div class='dropdown-header'>
          <h3>Danh mục công cụ</h3>
          <button class='dropdown-close' id='dropdownClose' aria-label='Đóng'>×</button>
        </div>
        <div class='dropdown-grid' id='categoryGrid'>
          <!-- Dynamically populated -->
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN WRAPPER -->
  <div class='main-wrapper'>
    <!-- LEFT SIDEBAR -->
    <aside class='sidebar' id='sidebar'>
      <div class='sidebar-header'>
        <img class='sidebar-header-icon' src='https://i.ibb.co/RTDTms0C/Logo-new.png' alt='Việt-AI Logo' style='width: 32px; height: 32px; border-radius: 50%; object-fit: cover;'/>
        <div class='sidebar-header-text'>
          <div class='sidebar-brand-name'>Việt-AI</div>
          <div class='sidebar-tagline'>Điểm chạm thăng hoa</div>
        </div>
        <div class='sidebar-header-arrow' style='display: block; width: 6px; height: 6px; border-top: 2px solid #a0aec0; border-right: 2px solid #a0aec0; transform: rotate(45deg);'></div>
      </div>
      <ul class='sidebar-menu'>
        <li class='menu-item'>
          <a class='menu-link active' data-category='all'>
            <span class='menu-icon'>🏠</span>
            <span>Tất cả công cụ</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Ai Hot'>
            <span class='menu-icon'>🔥</span>
            <span>Ai Hot</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Viết nội dung'>
            <span class='menu-icon'>✍️</span>
            <span>Viết nội dung</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Hình ảnh'>
            <span class='menu-icon'>🖼️</span>
            <span>Hình ảnh</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Video'>
            <span class='menu-icon'>🎬</span>
            <span>Video</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Văn phòng'>
            <span class='menu-icon'>💼</span>
            <span>Văn phòng</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Trợ lý &amp; Agent'>
            <span class='menu-icon'>🤖</span>
            <span>Trợ lý &amp; Agent</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Chatbot'>
            <span class='menu-icon'>💬</span>
            <span>Chatbot</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Lập trình'>
            <span class='menu-icon'>⌨️</span>
            <span>Lập trình</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Thiết kế'>
            <span class='menu-icon'>🎨</span>
            <span>Thiết kế</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Âm thanh'>
            <span class='menu-icon'>🔊</span>
            <span>Âm thanh</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Tìm kiếm'>
            <span class='menu-icon'>🔍</span>
            <span>Tìm kiếm</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Nền tảng AI'>
            <span class='menu-icon'>🌐</span>
            <span>Nền tảng AI</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Học &amp; Tài nguyên'>
            <span class='menu-icon'>📚</span>
            <span>Học &amp; Tài nguyên</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Huấn luyện mô hình'>
            <span class='menu-icon'>🧠</span>
            <span>Huấn luyện mô hình</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Đánh giá mô hình'>
            <span class='menu-icon'>📊</span>
            <span>Đánh giá mô hình</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Kiểm tra nội dung'>
            <span class='menu-icon'>✅</span>
            <span>Kiểm tra nội dung</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link' data-category='Prompt'>
            <span class='menu-icon'>📝</span>
            <span>Prompt</span>
          </a>
        </li>
        <li class='menu-item-divider'></li>
        <li class='menu-item'>
          <a class='menu-link-btn' href='#'>
            <span class='menu-icon'>🎓</span>
            <span>Khóa học hot</span>
          </a>
        </li>
        <li class='menu-item'>
          <a class='menu-link-secondary' href='#'>
            <span class='menu-icon'>🤝</span>
            <span>Hợp tác &amp; Đăng ký</span>
          </a>
        </li>
      </ul>
    </aside>

    <!-- CONTENT AREA -->
    <div class='content-area' id='mainContent'>
      <!-- JavaScript will render ALL content here -->
      <div class='loading'>⏳ Đang chuẩn bị dữ liệu...</div>
    </div>
    
    <!-- Required section for Blogger (hidden, not used) -->
    <b:section id='hidden-section' showaddelement='no' style='display:none;'/>

    <!-- FOOTER -->
  </div>

  <!-- MOBILE MENU TOGGLE -->
  <button class='mobile-menu-toggle' id='mobileMenuToggle' aria-label='Mở menu'>☰</button>

  <!-- FLOATING POPUP BANNERS -->
  <div class='floating-popups' id='floatingPopups'>
    <!-- Circular Icon Menu -->
    <div class='popup-icon-menu'>
      <div class='popup-main-icon' id='popupMainIcon'>
        <span class='popup-menu-icon-text'>☰</span>
      </div>
      <div class='popup-menu-items' id='popupMenuItems'>
        <a class='popup-menu-item' href='#'>
          <div class='popup-menu-item-icon'>💬</div>
          <div class='popup-menu-item-text'>Tư vấn</div>
        </a>
        <a class='popup-menu-item' href='#'>
          <div class='popup-menu-item-icon'>👥</div>
          <div class='popup-menu-item-text'>Cộng đồng</div>
        </a>
        <a class='popup-menu-item' href='#'>
          <div class='popup-menu-item-icon'>📋</div>
          <div class='popup-menu-item-text'>Danh sách</div>
        </a>
        <a class='popup-menu-item' href='#'>
          <div class='popup-menu-item-icon'>⬆️</div>
          <div class='popup-menu-item-text'>Lên đầu</div>
        </a>
      </div>
    </div>
    
    <!-- Event Banner -->
    <div class='popup-banner' id='eventBanner'>
      <button class='popup-close' onclick='this.parentElement.remove()' aria-label='Đóng'>×</button>
      <img alt='Event' class='popup-image' src='https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&amp;fit=crop&amp;q=80&amp;w=800'/>
      <h3 class='popup-title'>[Sự kiện] Kết nối AI &amp; Công nghệ 2026</h3>
      <div class='popup-meta'>
        <span class='popup-date'>2025-12-26</span>
        <button class='popup-button'>Đăng ký ngay</button>
      </div>
    </div>
  </div>


  <!-- FOOTER -->
  <div class='footer-wrapper'>
    <!-- Top Tip Bar -->
    <div class='footer-tip-bar'>
      <div class='footer-container'>
        <div class='footer-tip-left'>
          <span>Nhấn</span>
          <span class='keycap'>Command</span>
          <span>+</span>
          <span class='keycap'>D</span>
          <span class='tip-text'>Một chạm lưu lại! Thư mục công cụ AI hữu ích nhất.</span>
        </div>
        <div class='footer-tip-right'>
          <span>Tham gia cùng chúng tôi:</span>
          <div class='social-icons-row'>
            <a href='#' class='social-icon' aria-label='Messenger'>💬</a>
            <a href='#' class='social-icon' aria-label='X (Twitter)'>🐦</a>
            <a href='#' class='social-icon' aria-label='Instagram'>📸</a>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bottom Bar -->
    <div class='footer-bottom-bar'>
      <div class='footer-bottom-content'>
        <div class='footer-legal-links'>
          <a href='/p/ve-chung-toi.html' class='footer-legal-link'>Về chúng tôi</a>
          <a href='/p/tham-gia-cung-viet-ai.html' class='footer-legal-link'>Tham gia cùng Việt-AI</a>
          <a href='/p/hop-tac-quang-cao.html' class='footer-legal-link'>Hợp tác quảng cáo</a>
          <a href='/p/lien-he.html' class='footer-legal-link'>Liên hệ</a>
          <a href='/p/mien-tru-trach-nhiem.html' class='footer-legal-link'>Miễn trừ trách nhiệm</a>
          <a href='/p/chinh-sach-bao-mat.html' class='footer-legal-link'>Chính sách bảo mật</a>
        </div>
        <p>Copyright © 2025 AI Tools Directory | Powered by AI Hay Academy</p>
        <div class='copyright-row'>
          ✨ Khám phá 500+ công cụ AI hàng đầu để tối ưu hóa công việc và cuộc sống của bạn.
        </div>
      </div>
    </div>
  </div>

  <!-- JAVASCRIPT -->
  <script>
  //<![CDATA[
  const blogUrl = window.location.origin;
  let allTools = [];
  let currentCategory = 'all';
  let viewMode = 'home'; // 'home' or 'detail'

  // Global helper for broken images
  function handleImageError(img, title, fallbackIcon = '') {
    img.onerror = null; // Prevent infinite loop
    
    // If the primary image failed (e.g. heroImage), try the secondary icon
    if (fallbackIcon && img.src !== fallbackIcon) {
      img.src = fallbackIcon;
      // If the fallback icon also fails, it will trigger handleImageError again (now with img.src === fallbackIcon)
      return;
    }
    
    const char = title ? title.charAt(0).toUpperCase() : 'A';
    // Deep Blue background with white letter - Premium Look
    img.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Crect fill='%23667eea' width='100%25' height='100%25' rx='12'/%3E%3Ctext x='50%25' y='50%25' font-size='48' fill='white' text-anchor='middle' dy='.3em' font-weight='bold' font-family='Inter, sans-serif'%3E${char}%3C/text%3E%3C/svg%3E`;
  }
  let currentDetailTool = null;

  // Render Premium Hero Section
  function renderHero(minimal = false, searchValue = '') {
    const mainHero = `
      <div class="hero-section">
        <div class="hero-banner-box">
          <h2 class="hero-title">Triệu người tin dùng Thư viện công cụ AI</h2>
          
          <div class="search-tabs-container">
            <div class="search-tab active">Google</div>
            <div class="search-tab">Hướng dẫn</div>
          </div>
          
          <div class="search-wrapper">
            <input type="text" id="searchInput" placeholder="Vui lòng nhập công cụ cần tìm kiếm..." aria-label="Tìm kiếm công cụ AI" value="${searchValue}" onkeypress="if(event.key==='Enter') handleSearch()"/>
            <button class="search-btn" onclick="handleSearch()" aria-label="Tìm kiếm">🔍</button>
          </div>
          
          <div class="trending-tags">
            <span class="trending-label">Hot search:</span>
            <a href="#" class="trending-tag" onclick="quickSearch('ChatGPT'); return false;">ChatGPT <span class="tag-badge hot">HOT</span></a>
            <a href="#" class="trending-tag" onclick="quickSearch('Midjourney'); return false;">Midjourney <span class="tag-badge hot">HOT</span></a>
            <a href="#" class="trending-tag" onclick="quickSearch('Luma'); return false;">Luma <span class="tag-badge rec">NEW</span></a>
            <a href="#" class="trending-tag" onclick="quickSearch('Stable Diffusion'); return false;">Stable Diffusion</a>
            <a href="#" class="trending-tag" onclick="quickSearch('Claude'); return false;">Claude</a>
          </div>
        </div>
      </div>
    `;
    
    if (minimal) return mainHero;
    
    return `
      ${mainHero}
      ${renderFeaturedSection()}
      ${renderPromoBanners()}
    `;
  }

  function renderPromoBanners() {
    return `
      <div class="promo-banners-row">
        <a href="#" class="promo-banner promo-dark">
          <div class="promo-info">
            <div class="promo-logo">🚀</div>
            <div class="promo-text">
              <h4>Jimeng AI</h4>
              <p>Mô hình chuyển văn bản thành Video hàng đầu</p>
            </div>
          </div>
          <div class="promo-btn">Dùng thử ngay</div>
        </a>
        <a href="#" class="promo-banner promo-purple">
          <div class="promo-info">
            <div class="promo-logo">🎥</div>
            <div class="promo-text">
              <h4>Keevx AI</h4>
              <p>Sáng tạo nội dung video marketing đỉnh cao</p>
            </div>
          </div>
          <div class="promo-btn">Tạo video ngay</div>
        </a>
      </div>
    `;
  }

  function renderFeaturedSection() {
    // Filter tools based on the 'Ai Hot' label
    const filteredItems = allTools
      .filter(tool => tool.categories.some(c => c === 'Ai Hot'))
      .slice(0, 6);

    // If no dynamic items, use sample fallback
    const itemsToDisplay = filteredItems.length > 0 ? filteredItems : [
      { title: "Quyền lợi thành viên 12 tháng", description: "Chuyên gia quyền nhận lợi ích độc quyền", tags: ["Hot"], icon: "https://images.unsplash.com/photo-1677442136019-21780ecad995?w=400&h=225&fit=crop", url: "#" },
      { title: "Hợp tác chuyên gia AI", description: "Kết nối mạng lưới chuyên gia toàn cầu", tags: ["Mới"], icon: "https://images.unsplash.com/photo-1620712943543-bcc4628c9759?w=400&h=225&fit=crop", url: "#" },
      { title: "Tạo Poster phim với AI", description: "5 phút thực hành tạo poster cực chất", tags: ["No.1"], icon: "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=400&h=225&fit=crop", url: "#" },
      { title: "Bí kíp sử dụng Prompt", description: "9 phương pháp tối ưu hóa câu lệnh AI", tags: ["No.2"], icon: "https://images.unsplash.com/photo-1676299081847-824916de030a?w=400&h=225&fit=crop", url: "#" },
      { title: "Tự học làm Game AI", description: "Hướng dẫn thực chiến cho người mới", tags: ["No.3"], icon: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=225&fit=crop", url: "#" },
      { title: "Google Gemini & N8N", description: "Tích hợp công cụ tự động hóa đỉnh cao", tags: ["No.4"], icon: "https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=400&h=225&fit=crop", url: "#" }
    ];

    // Find latest news from 'Tin tức' label
    const latestNews = allTools.find(tool => tool.categories.some(c => c === 'Tin tức'));
    const newsTitle = latestNews ? latestNews.title : "Cập nhật những công cụ AI mới nhất!";
    const newsUrl = latestNews ? latestNews.url : "/search/label/Tin tức";

    return `
      <div class="featured-section">
        <div class="featured-header">
          <div class="featured-header-left">
            <span class="featured-title">Ai Hot</span>
            <a href="/search/label/Ai Hot" class="featured-badge-btn">Lập tức truy cập ></a>
          </div>
          
          <div class="featured-header-right">
            <a href="${newsUrl}" class="inline-news-ticker">
              <span class="ticker-icon">🔥</span>
              <span class="ticker-text">Tin hot: ${newsTitle}</span>
              <span class="ticker-arrow">→</span>
            </a>
            <a href="/search/label/Ai Hot" class="featured-more">Xem thêm ></a>
          </div>
        </div>

        <div class="featured-grid">
          ${itemsToDisplay.map(item => {
            const badge = (item.tags && item.tags[0]) || '';
            return `
            <a href="${item.url}" class="featured-card">
              <div class="feat-img-box">
                <img src="${item.heroImage || item.icon}" alt="${item.title}" onerror="handleImageError(this, '${item.title.replace(/'/g, "\\'")}')">
              </div>
              <div class="feat-info">
                <div class="feat-title-row">
                  <span class="feat-title-text">${item.title}</span>
                </div>
                <div class="feat-desc">${item.description}</div>
              </div>
            </a>
          `}).join('')}
        </div>
      </div>
    `;
  }

  // Render Trending Keywords Section (New)
  function renderTrendingSearch() {
    // Dynamic News Ticker
    const latestNews = allTools.find(t => t.categories.includes('Tin tức'));
    const newsTitle = latestNews ? latestNews.title : 'Cập nhật công nghệ AI mới nhất';
    const newsUrl = latestNews ? latestNews.url : '#';

    const hotTags = [
      { text: "Font chữ miễn phí", icon: "👍", class: "hot" },
      { text: "AI Trending 2025", icon: "🔥", class: "hot" },
      { text: "Bộ Prompt cực chất", icon: "🏆", class: "hot" }
    ];
    
    const plainTags = [
      "Stable Diffusion", "Logo AI", "AI Drawing", "Figma", "Design", "UI", "Midjourney", "C4D", "AIGC", "Mockup", "Canva", "ChatGPT"
    ];

    return `
      <div class="trending-keywords-section">
        <a href="${newsUrl}" class="trending-ticker" style="text-decoration: none; color: inherit; display: flex; align-items: center; width: 100%;">
          <span class="ticker-icon">📢</span>
          <span class="ticker-text" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><strong>Tin hot:</strong> ${newsTitle}</span>
        </a>
        <div class="trending-tags-cloud">
          ${hotTags.map(tag => `
            <a href="#" class="trending-tag-pill ${tag.class}" onclick="quickSearch('${tag.text}'); return false;">
              ${tag.icon} ${tag.text}
            </a>
          `).join('')}
          ${plainTags.map(tag => `
            <a href="#" class="trending-tag-pill" onclick="quickSearch('${tag}'); return false;">
              ${tag}
            </a>
          `).join('')}
        </div>
      </div>
    `;
  }

  // Quick search helper
  function quickSearch(term) {
    const searchQuery = encodeURIComponent(term.trim());
    window.location.href = `${blogUrl}/search?q=${searchQuery}`;
  }

  // Get category icon (Unified)
  function getCategoryIcon(cat) {
    const icons = {
      'Ai Hot': '🔥',
      'Viết nội dung': '✍️',
      'Hình ảnh': '🖼️',
      'Video': '🎬',
      'Văn phòng': '💼',
      'Trợ lý & Agent': '🤖',
      'Chatbot': '💬',
      'Lập trình': '⌨️',
      'Thiết kế': '🎨',
      'Âm thanh': '🔊',
      'Tìm kiếm': '🔍',
      'Nền tảng AI': '🌐',
      'Học & Tài nguyên': '📚',
      'Huấn luyện mô hình': '🧠',
      'Đánh giá mô hình': '📊',
      'Kiểm tra nội dung': '✅',
      'Prompt': '📝',
      // Legacy/Fallback mappings
      'Gợi ý hot': '🔥',
      'AI Hội họa': '🎨',
      'AI Chat': '💬',
      'AI Prompt': '⌨️',
      'Xử lý hình ảnh': '🖼️',
      'Thiết kế UI': '💻',
      'Thiết kế Đồ họa': '📐',
      'AI Viết lách': '✍️',
      'Âm thanh & Video': '🎬',
      'Thiết kế 3D': '🧊',
      'AI Học tập': '📚',
      'AI Văn phòng': '💼',
      'AI Dịch thuật': '🌐',
      'AI Lập trình': '💻',
      'Cơ quan nghiên cứu': '🏛️',
      'Chuyên gia AIGC': '👤',
      'AI Writing': '✍️',
      'AI Image': '🎨',
      'AI Video': '🎬',
      'AI Coding': '💻',
      'Video & Audio': '🎬'
    };
    return icons[cat] || '✨';
  }

  // Handle search button click - redirect to Blogger search page
  function handleSearch() {
    const input = document.getElementById('searchInput');
    if (input && input.value.trim() !== '') {
      const searchQuery = encodeURIComponent(input.value.trim());
      window.location.href = `${blogUrl}/search?q=${searchQuery}`;
    }
  }

  // Render AI-Bot Style Detail View
  // Render Premium Detail View
  function renderDetailView(tool) {
    const relatedTools = allTools
      .filter(t => t.categories.some(c => tool.categories.includes(c)) && t.title !== tool.title)
      .slice(0, 6);
    
    return `
      <div class="detail-inpage">
        <div class="detail-back-bar">
          <a href="#" class="detail-back-link" onclick="backToHome(); return false;">
            ← Quay lại danh sách
          </a>
        </div>
        
        <div class="detail-header-new">
          <!-- Column 1: Compact Visual -->
          <div class="header-visual-compact">
            <img class="compact-thumbnail" src="${tool.icon}" alt="${tool.title}" onerror="handleImageError(this, '${tool.title.replace(/'/g, "\\'")}')" />
            <div class="interaction-stats">
              <div class="stat-item">
                <span>👍</span>
                <span>${tool.rating || '0'}</span>
              </div>
              <div class="stat-item">
                <span>💬</span>
                <span>0</span>
              </div>
            </div>
          </div>

          <!-- Column 2: Main Content -->
          <div class="header-content-main">
            <div class="tag-badges">
              <span class="badge-chip">${tool.categories[0] || 'AI Tool'}</span>
              ${tool.price === 'Free' || tool.price === 'Miễn phí' ? '<span class="badge-chip free">FREE</span>' : ''}
            </div>
            <h1 class="compact-title">${tool.title}</h1>
            <p class="compact-description">${tool.description}</p>
            
            ${tool.tags.length > 0 ? `<div class="meta-tags"><strong>Nhãn:</strong> ${tool.tags.join(', ')}</div>` : ''}
            
            <div class="action-group">
              <a href="${tool.url}" target="_blank" class="primary-action-btn">Ghé thăm Website ›</a>
              <button class="security-badge" title="An toàn">🛡️</button>
            </div>
            </div>
          </div>

          <!-- Column 3: Promotional Card -->
          <div class="header-promo-card">
            <div class="promo-tag">ⓘ ⋮</div>
            <img class="promo-icon" src="https://i.ibb.co/C5nFmS9N/Naraka-Icon.png" alt="Promo">
            <h4>Tải Trước Naraka PC Miễn Phí</h4>
            <p class="promo-desc">Khám phá kho skin độc bản và nhận ngay quà Giftcode khi tham gia Naraka bản Việt.</p>
            <div class="promo-source">NARAKA: BLADEPOINT VN</div>
            <a href="#" class="promo-cta-btn">Tải Xuống ❯</a>
          </div>
        </div>
        
        <div class="detail-body-card">
          <h2 class="detail-section-title">Giới thiệu chi tiết</h2>
          <div class="detail-full-text">
            ${tool.fullContent || `<p>${tool.description}</p>`}
          </div>
        </div>

        <!-- Related Tools Section -->
        ${relatedTools.length > 0 ? `
          <h3 class="detail-section-title" style="margin: 40px 0 20px;">📂 Công cụ tương tự</h3>
          <div class="related-grid-new">
            ${relatedTools.map(t => `
              <a href="${t.url}" class="related-card-mini" onclick="showDetailView(${JSON.stringify(t).replace(/"/g, '&quot;')}); return false;">
                <img src="${t.icon}" alt="${t.title}" onerror="handleImageError(this, '${t.title.replace(/'/g, "\\'")}')">
                <div class="related-mini-info">
                  <h4>${t.title}</h4>
                  <p>${t.description}</p>
                </div>
              </a>
            `).join('')}
          </div>
        ` : ''}

        <!-- Promo Banner -->
        <div class="detail-footer-banner">
          <a href="#">
            <img src="https://ai-bot.cn/wp-content/uploads/2025/09/jimeng-ai-banner-0912.png" alt="Jimeng AI Promo">
          </a>
        </div>

        <!-- Comments Section -->
        <div class="comments-container-new">
          <div class="comments-header-row">
            <div class="comments-title">
              <span>💬</span> <span id="commentCount">0</span> Bình luận
            </div>
            <button class="toggle-comments-btn" id="toggleCommentsBtn" onclick="toggleComments()">
              Đang thử nghiệm
            </button>
          </div>
          
          <div id="commentsList" class="comments-list">
            <!-- Comments will be rendered here -->
          </div>

          <div class="comment-form">
            <textarea id="commentContent" placeholder="Vui lòng nhập nội dung bình luận..."></textarea>
            <div class="comment-inputs-row">
              <input id="commentName" type="text" placeholder="Biệt danh (Bắt buộc)">
              <input id="commentEmail" type="email" placeholder="Email (Tùy chọn)">
              <input id="commentWebsite" type="text" placeholder="Website (Tùy chọn)">
            </div>
            <button class="comment-submit-btn" onclick="handleCommentSubmit()">Gửi bình luận</button>
          </div>
        </div>
      </div>
      </div>
    `;
  }


  // NEW: Inject JSON-LD Schema for SEO
  function injectSoftwareAppSchema(tool) {
    const existingScript = document.getElementById('json-ld-schema');
    if (existingScript) existingScript.remove();

    const title = tool.title && tool.title.$t ? tool.title.$t : 'AI Tool';
    const desc = tool.summary && tool.summary.$t ? tool.summary.$t : (tool.content && tool.content.$t ? tool.content.$t.substring(0, 150) + '...' : '');
    const image = (tool.media$thumbnail && tool.media$thumbnail.url) ? tool.media$thumbnail.url.replace('s72-c', 's600') : 'https://via.placeholder.com/600x400';
    const category = tool.category && tool.category.length > 0 ? tool.category.map(c => c.term).join(', ') : 'Software';
    const url = window.location.href;

    const schemaData = {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": title,
      "description": desc.replace(/<[^>]*>?/gm, ''), // Remove HTML tags
      "applicationCategory": category,
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "image": image,
      "url": url
    };

    const script = document.createElement('script');
    script.id = 'json-ld-schema';
    script.type = 'application/ld+json';
    script.text = JSON.stringify(schemaData);
    document.head.appendChild(script);
    console.log('SEO Schema injected for:', title);
  }

  // Navigate to detail view
  function showDetailView(tool) {
    viewMode = 'detail';
    currentDetailTool = tool;
    const mainContent = document.getElementById('mainContent');
    mainContent.innerHTML = renderDetailView(tool);
    
    // Inject SEO Schema
    injectSoftwareAppSchema(tool);

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Format static page content for better presentation
  function formatStaticContent(html) {
    if (!html) return '<p>Nội dung đang được cập nhật...</p>';
    
    // First, convert Markdown to HTML before parsing
    let text = html;
    
    // Convert bold: **text** to <b>text</b>
    text = text.replace(/\*\*([^*]+)\*\*/g, '<b>$1</b>');
    
    // Convert italic: *text* to <em>text</em> (but not ** or ***)
    text = text.replace(/(?<!\*)\*([^*]+)\*(?!\*)/g, '<em>$1</em>');
    
    // Convert headers if not already HTML
    text = text.replace(/^###\s+(.+)$/gm, '<h3>$1</h3>');
    text = text.replace(/^##\s+(.+)$/gm, '<h2>$1</h2>');
    text = text.replace(/^#\s+(.+)$/gm, '<h1>$1</h1>');
    
    // Create a temporary div to parse HTML
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = text;
    
    // Add responsive classes to images
    const images = tempDiv.querySelectorAll('img');
    images.forEach(img => {
      img.style.maxWidth = '100%';
      img.style.height = 'auto';
      img.style.borderRadius = '12px';
      img.style.margin = '20px 0';
      img.style.boxShadow = '0 4px 12px rgba(0,0,0,0.08)';
    });
    
    // Style blockquotes as callout boxes
    const blockquotes = tempDiv.querySelectorAll('blockquote');
    blockquotes.forEach(bq => {
      bq.style.borderLeft = '4px solid #4f46e5';
      bq.style.paddingLeft = '20px';
      bq.style.marginLeft = '0';
      bq.style.fontStyle = 'italic';
      bq.style.color = '#64748b';
      bq.style.background = '#f8fafc';
      bq.style.padding = '15px 20px';
      bq.style.borderRadius = '8px';
    });
    
    // Add spacing to headings
    const headings = tempDiv.querySelectorAll('h1, h2, h3, h4');
    headings.forEach(h => {
      h.style.marginTop = '30px';
      h.style.marginBottom = '15px';
    });
    
    return tempDiv.innerHTML;
  }

  // Render Static Page (3-Column Layout)
  function renderStaticPage(page) {
    const title = page.title.$t;
    const content = page.content ? page.content.$t : '';
    const formattedContent = formatStaticContent(content);
    const date = new Date(page.updated.$t).toLocaleDateString('vi-VN');

    // Sample Right Sidebar Data
    const sidebarWidgets = `
      <div class="static-widget">
        <h3 class="widget-title">📌 Tin nổi bật</h3>
        <div class="widget-list">
          <a href="#" class="widget-item">
            <div class="widget-icon">🚀</div>
            <div class="widget-text">Ra mắt khóa học AI Master 2025</div>
          </a>
          <a href="#" class="widget-item">
            <div class="widget-icon">💎</div>
            <div class="widget-text">Nâng cấp tài khoản Premium</div>
          </a>
          <a href="#" class="widget-item">
            <div class="widget-icon">📢</div>
            <div class="widget-text">Tuyển dụng cộng tác viên Content</div>
          </a>
        </div>
      </div>
      
      <div class="static-widget">
        <h3 class="widget-title">📞 Hỗ trợ nhanh</h3>
        <p style="color: #64748b; font-size: 0.95rem; line-height: 1.6;">
          Bạn cần giúp đỡ? Liên hệ ngay với đội ngũ hỗ trợ của chúng tôi.<br><br>
          <strong>Hotline:</strong> 1900 1234<br>
          <strong>Email:</strong> support@aihay.vn
        </p>
      </div>
    `;

    return `
      <div class="static-page-wrapper">
        <!-- Center Content -->
        <div class="static-content-main">
          <header class="static-page-header">
            <h1 class="static-title">${title}</h1>
            <div class="static-meta">Cập nhật lần cuối: ${date}</div>
          </header>
          <div class="static-body">
            ${formattedContent}
          </div>
        </div>

        <!-- Right Sidebar -->
        <aside class="static-sidebar-right">
          ${sidebarWidgets}
        </aside>
      </div>
    `;
  }

  // Back to homepage
  function backToHome() {
    viewMode = 'home';
    currentDetailTool = null;
    // Clear static page specific styles if needed or reset view
    renderTools(); // Fallback to main render
    window.location.href = blogUrl; // Best to reload for clean state
  }

  // Fetch posts from Blogger JSON Feed  
  // --- SKELETON LOADING UI (NEW) ---
  function renderSkeletonGrid(count = 12) {
    const mainContent = document.getElementById('mainContent');
    if (!mainContent) return;
    
    let html = '<div class="tools-grid">';
    for(let i=0; i<count; i++) {
        html += `
        <div class="skeleton-card">
            <div class="skeleton-image"></div>
            <div class="skeleton-title"></div>
            <div class="skeleton-desc"></div>
            <div class="skeleton-desc short"></div>
        </div>
        `;
    }
    html += '</div>';
    
    // Inject into Main Content
    mainContent.innerHTML = html;
  }

  // Random Loading Messages
  function getRandomLoadingMessage() {
    const messages = [
      "Chúc bạn một ngày tràn đầy năng lượng! ✨",
      "Hãy cười nhiều lên nhé, bạn đẹp nhất khi cười! 😊",
      "Hôm nay sẽ là một ngày tuyệt vời của bạn! 🌟",
      "Đừng quên uống nước và giữ sức khỏe nhé! 💧",
      "Mọi nỗ lực của bạn sẽ được đền đáp xứng đáng! 💪",
      "Hít thở sâu và thư giãn một chút nào... 🍃",
      "Bạn đang làm rất tốt, tiếp tục phát huy nhé! 👍",
      "Niềm vui đang chờ đón bạn phía trước! 🌈",
      "Cảm ơn vì đã ghé thăm và đồng hành cùng chúng tôi! ❤️",
      "Chúc bạn tìm được công cụ ưng ý nhất hôm nay! 🚀"
    ];
    return messages[Math.floor(Math.random() * messages.length)];
  }

  async function loadTools() {
    console.log('loadTools() called! v2.0.1 - Big UI Update');
    console.log('Current path:', window.location.pathname);
    
    // Show Skeleton Loading immediately
    renderSkeletonGrid(12);

    const mainContent = document.getElementById('mainContent');
    const isPostPage = window.location.pathname.includes('.html') && !window.location.pathname.includes('/p/');
    const isStaticPage = window.location.pathname.includes('/p/'); // Detect Static Pages
    const isCategoryPage = window.location.pathname.includes('/search/label/');
    const isSearchPage = window.location.search.includes('q=') || window.location.pathname.includes('/search');
    
    
    if (isStaticPage) {
      console.log('🔵 Static Page detected');
      console.log('🔍 URL pathname:', window.location.pathname);
      mainContent.innerHTML = `<div class="loading">${getRandomLoadingMessage()}</div>`;
      
      try {
        const urlParts = window.location.pathname.split('/');
        const pageSlug = urlParts[urlParts.length - 1].replace('.html', '');
        console.log('🔍 Page slug extracted:', pageSlug);
        
        // Fetch specific PAGE data from pages feed
        const fetchUrl = blogUrl + '/feeds/pages/default?alt=json&max-results=999';
        console.log('🌐 Fetching from:', fetchUrl);
        
        const response = await fetch(fetchUrl);
        console.log('✅ Response status:', response.status);
        
        const data = await response.json();
        const pages = data.feed.entry || [];
        console.log('📄 Total pages found:', pages.length);
        
        // Log all page URLs for debugging
        if (pages.length > 0) {
          console.log('📋 Available pages:');
          pages.forEach((p, idx) => {
            const pageUrl = p.link.find(l => l.rel === 'alternate')?.href || 'N/A';
            console.log(`  ${idx + 1}. ${p.title.$t} - ${pageUrl}`);
          });
        } else {
          console.warn('⚠️ No pages found in feed! Please create a page in Blogger first.');
        }
        
        // Find matching page by link
        const page = pages.find(p => p.link.find(l => l.rel === 'alternate')?.href.includes(pageSlug));
        
        if (page) {
           console.log('✅ Page found:', page.title.$t);
           mainContent.innerHTML = renderStaticPage(page);
        } else {
           console.error('❌ Page not found for slug:', pageSlug);
           mainContent.innerHTML = `
             <div class="no-results">
               <h3>❌ Không tìm thấy trang này</h3>
               <p>Slug: ${pageSlug}</p>
               <p>Vui lòng kiểm tra:</p>
               <ul style="text-align: left; max-width: 500px; margin: 20px auto;">
                 <li>Đã tạo trang "Về chúng tôi" trong Blogger chưa?</li>
                 <li>URL của trang có khớp với slug không?</li>
                 <li>Kiểm tra Console (F12) để xem danh sách trang có sẵn</li>
               </ul>
             </div>
           `;
        }
      } catch (error) {
        console.error("❌ Error loading static page:", error);
        mainContent.innerHTML = `
          <div class="no-results">
            <h3>❌ Lỗi tải trang</h3>
            <p>Chi tiết lỗi: ${error.message}</p>
            <p>Vui lòng kiểm tra Console (F12) để xem chi tiết</p>
          </div>
        `;
      }
      return;
    }



  // Render News Post (Reuse Static Page Layout)
  function renderNewsPost(post) {
    const title = post.title.$t;
    const content = post.content ? post.content.$t : (post.summary ? post.summary.$t : '');
    const date = new Date(post.published.$t).toLocaleDateString('vi-VN');
    const author = post.author && post.author[0] ? post.author[0].name.$t : 'Ban biên tập';
    
    // Auto-format content
    const formattedContent = formatStaticContent(content);

    // Reuse sidebar widgets
    const sidebarWidgets = `
      <div class="static-widget">
        <h3 class="widget-title">📌 Tin nổi bật</h3>
        <div class="widget-list">
          <a href="#" class="widget-item">
            <div class="widget-icon">🚀</div>
            <div class="widget-text">Ra mắt khóa học AI Master 2025</div>
          </a>
          <a href="#" class="widget-item">
            <div class="widget-icon">💎</div>
            <div class="widget-text">Nâng cấp tài khoản Premium</div>
          </a>
          <a href="#" class="widget-item">
            <div class="widget-icon">📢</div>
            <div class="widget-text">Tuyển dụng cộng tác viên Content</div>
          </a>
        </div>
      </div>
    `;

    return `
      <div class="static-page-wrapper">
        <!-- Center Content -->
        <div class="static-content-main">
          <header class="static-page-header" style="text-align: left;">
            <h1 class="static-title" style="margin-bottom: 8px; text-align: left;">${title}</h1>
            <div class="static-meta" style="margin-bottom: 20px; justify-content: flex-start; color: #64748b;">
              📅 ${date} <span style="margin: 0 8px;">•</span> ✍️ ${author}
            </div>
          </header>
          <div class="static-body">
            ${formattedContent}
          </div>
          
          <!-- Related Posts Container -->
          <div id="news-related-container" style="margin-top: 60px; padding-top: 30px; border-top: 1px solid #e2e8f0;">
             <!-- Content will be loaded via JS -->
          </div>
          
          <!-- Comments Section for News -->
          <div class="comments-container-new" style="margin-top: 40px;">
            <div class="comments-header-row">
              <div class="comments-title">
                <span>💬</span> <span id="commentCount">0</span> Bình luận
              </div>
              <button class="toggle-comments-btn" id="toggleCommentsBtn" onclick="toggleComments()">
                Hiện bình luận
              </button>
            </div>
            
            <div id="commentsList" class="comments-list">
              <!-- Comments will be loaded from Blogger API -->
            </div>

            <div class="comment-form" style="text-align: center; padding: 20px;">
              <p style="color: #64748b; margin-bottom: 15px;">Để bình luận, bạn sẽ được chuyển đến trang Blogger</p>
              <button class="comment-submit-btn" onclick="handleCommentSubmit()" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                💬 Bình luận trên Blogger
              </button>
            </div>
          </div>
        </div>

        <!-- Right Sidebar -->
        <aside class="static-sidebar-right">
          ${sidebarWidgets}
        </aside>
      </div>
    `;
  }

  // Helper to load related news
  function loadRelatedNews(currentPost, allPosts) {
      const container = document.getElementById('news-related-container');
      if (!container) return;

      const currentLabels = currentPost.category ? currentPost.category.map(c => c.term) : [];
      
      // Filter related posts
      let related = allPosts.filter(p => {
          const pLink = p.link.find(l => l.rel === 'alternate')?.href;
          const cLink = currentPost.link.find(l => l.rel === 'alternate')?.href;
          if (pLink === cLink) return false;
          
          // If current post has labels, match by label
          if (currentLabels.length > 0) {
             const pLabels = p.category ? p.category.map(c => c.term) : [];
             return pLabels.some(l => currentLabels.includes(l));
          }
          
          // If no labels, include everything (will be sliced later)
          return true;
      });

      // If no related found by label (or strictly labelled), fallback to recent posts
      if (related.length === 0) {
          related = allPosts.filter(p => {
             const pLink = p.link.find(l => l.rel === 'alternate')?.href;
             const cLink = currentPost.link.find(l => l.rel === 'alternate')?.href;
             return pLink !== cLink;
          });
      }

      // Take top 6
      related = related.slice(0, 6);

      if (related.length === 0) return;

      const html = `
        <h3 style="font-size: 1.3em; font-weight: 700; margin-bottom: 25px; color: #1e293b; display: flex; align-items: center; gap: 10px;">
           <span style="background: #3b82f6; width: 4px; height: 24px; display: block; border-radius: 2px;"></span>
           Bài viết cùng chuyên mục
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px;">
          ${related.map(p => {
              const title = p.title.$t;
              const link = p.link.find(l => l.rel === 'alternate')?.href;
              // Try to find image in content or use fallback
              const content = p.content ? p.content.$t : '';
              const tempDiv = document.createElement('div');
              tempDiv.innerHTML = content;
              const img = tempDiv.querySelector('img')?.src || extractMeta(content, 'ICON') || 'https://via.placeholder.com/300x200?text=News';
              const date = new Date(p.published.$t).toLocaleDateString('vi-VN');
              
              return `
              <a href="${link}" style="text-decoration: none; color: inherit; display: block; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                <div style="border-radius: 12px; overflow: hidden; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); aspect-ratio: 16/10;">
                  <img src="${img}" style="width: 100%; height: 100%; object-fit: cover;" loading="lazy"/>
                </div>
                <h4 style="font-size: 0.95rem; font-weight: 600; margin: 0 0 6px; line-height: 1.4; color: #334155; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">${title}</h4>
                <div style="font-size: 0.8rem; color: #94a3b8;">📅 ${date}</div>
              </a>
              `;
          }).join('')}
        </div>
      `;
      
      container.innerHTML = html;
  }



    if (isPostPage) {
      console.log('Post page detected - analyzing type...');
      mainContent.innerHTML = `<div class="loading">${getRandomLoadingMessage()}</div>`;
      
      try {
        const urlParts = window.location.pathname.split('/');
        const postSlug = urlParts[urlParts.length - 1].replace('.html', '');
        
        // Fetch ALL posts with pagination to find the target post
        let allPosts = [];
        let startIndex = 1;
        const batchSize = 150;
        const maxBatches = 50;
        let batchCount = 0;
        let hasMore = true;
        let foundPost = null;
        
        console.log(`Searching for post with slug: ${postSlug}`);
        
        while (hasMore && batchCount < maxBatches && !foundPost) {
          batchCount++;
          const fetchUrl = `${blogUrl}/feeds/posts/default?alt=json&max-results=${batchSize}&start-index=${startIndex}`;
          console.log(`Fetching batch ${batchCount}: start-index=${startIndex}`);
          
          try {
            const response = await fetch(fetchUrl);
            if (!response.ok) break;
            
            const data = await response.json();
            const posts = data.feed.entry || [];
            
            // Always add to allPosts so we have data for "Related Tools"
            if (posts.length > 0) {
              allPosts = allPosts.concat(posts);
            }

            // Try to find the post in this batch
            foundPost = posts.find(p => p.link.find(l => l.rel === 'alternate')?.href.includes(postSlug));
            
            if (foundPost) {
              console.log(`✅ Found post "${foundPost.title.$t}" in batch ${batchCount}`);
              break; // Stop fetching once found
            }
            
            if (posts.length < batchSize) {
              hasMore = false;
            }
            
            // Move to next batch for next iteration
            startIndex += batchSize;
          } catch (error) {
            console.error(`Error fetching batch ${batchCount}:`, error);
            break;
          }
        }
        
        const post = foundPost;
        const posts = allPosts; // Now contains data for related posts
        
        if (post) {
          const content = post.content ? post.content.$t : (post.summary ? post.summary.$t : '');
          const labels = post.category ? post.category.map(c => c.term) : [];
          
          // DETECT NEWS POST
          // 1. Has specific label
          // 2. OR does not have metadata block
          const isNewsPost = labels.some(l => ['Tin tức', 'Blog', 'News', 'Sự kiện', 'Thông báo'].includes(l)) || !content.includes('---META---');
          
          if (isNewsPost) {
             console.log('📰 Identified as News Post');
             mainContent.innerHTML = renderNewsPost(post);
             // Load related news async
             loadRelatedNews(post, posts);
             // Initialize Blogger Comments for News Post
             const newsPostId = post.id?.$t?.split('post-').pop() || null;
             const newsPostUrl = post.link?.find(l => l.rel === 'alternate')?.href || null;
             if (newsPostId && newsPostUrl) {
               initPostComments(newsPostId, newsPostUrl);
             }
             return;
          }

          // RENDER TOOL POST (Legacy Logic)
          console.log('🛠️ Identified as Tool Post');
          const title = post.title.$t;

          // labels already declared above
          const icon = extractMeta(content, 'ICON') || 'https://via.placeholder.com/120x120/3459e6/ffffff?text=AI';
          const url = extractMeta(content, 'URL') || '#';
          const tags = extractMeta(content, 'TAGS') || labels.join(', ');
          const description = extractDescription(content) || 'Công cụ AI hỗ trợ công việc hiệu quả';
          const price = extractMeta(content, 'PRICE') || 'Free';
          const rating = extractMeta(content, 'RATING') || '0';
          const heroImage = extractMeta(content, 'HERO_IMAGE') || icon;
          
          mainContent.innerHTML = `
            <article class='detail-inpage'>
              <div class='detail-back-bar'>
                <a class='detail-back-link' href='${blogUrl}'>
                  <span>🏠</span> Trang chủ › ${title}
                </a>
              </div>
              
              <div class="detail-header-new">
                <!-- Column 1: Compact Visual -->
                <div class="header-visual-compact">
                  <img class="compact-thumbnail" src="${icon}" alt="${title}" onerror="handleImageError(this, '${title.replace(/'/g, "\\'")}')" />
                  <div class="interaction-stats">
                    <div class="stat-item">
                      <span>👍</span>
                      <span>${rating}</span>
                    </div>
                    <div class="stat-item">
                      <span>💬</span>
                      <span>0</span>
                    </div>
                  </div>
                </div>

                <!-- Column 2: Main Content -->
                <div class="header-content-main">
                  <div class="tag-badges">
                    <span class="badge-chip">${labels[0] || 'AI Tool'}</span>
                    ${price === 'Free' || price === 'Miễn phí' ? '<span class="badge-chip free">FREE</span>' : ''}
                  </div>
                  <h1 class="compact-title">${title}</h1>
                  <p class="compact-description">${description}</p>
                  
                  ${tags ? `<div class="meta-tags"><strong>Nhãn:</strong> ${tags}</div>` : ''}
                  
                  <div class="action-group">
                    <a href="${url}" target="_blank" class="primary-action-btn">Ghé thăm Website ›</a>
                    <button class="security-badge" title="An toàn">🛡️</button>
                  </div>
                </div>

                <!-- Column 3: Promotional Card -->
                <div class="header-promo-card">
                  <div class="promo-tag">ⓘ ⋮</div>
                  <img class="promo-icon" src="https://i.ibb.co/C5nFmS9N/Naraka-Icon.png" alt="Promo">
                  <h4>Tải Trước Naraka PC Miễn Phí</h4>
                  <p class="promo-desc">Khám phá kho skin độc bản và nhận ngay quà Giftcode khi tham gia Naraka bản Việt.</p>
                  <div class="promo-source">NARAKA: BLADEPOINT VN</div>
                  <a href="#" class="promo-cta-btn">Tải Xuống ❯</a>
                </div>
              </div>

              <div class='detail-body-card'>
                <h2 class='detail-section-title'>Giới thiệu chi tiết</h2>
                <div class='detail-full-text'>${extractFullContent(content)}</div>
              </div>

              <!-- Footer Sections for Post Page -->
              <h3 class="detail-section-title" style="margin: 40px 0 20px;">📂 Công cụ tương tự</h3>
              <div class="related-grid-new">
                 <div class="loading">Đang tải các công cụ liên quan...</div>
              </div>

              <div class="detail-footer-banner">
                <a href="#">
                  <img src="https://ai-bot.cn/wp-content/uploads/2025/09/jimeng-ai-banner-0912.png" alt="Jimeng AI Promo">
                </a>
              </div>

              <div class="comments-container-new">
                <div class="comments-header-row">
                  <div class="comments-title">
                    <span>💬</span> <span id="commentCount">0</span> Bình luận
                  </div>
                  <button class="toggle-comments-btn" id="toggleCommentsBtn" onclick="toggleComments()">
                    Hiện bình luận
                  </button>
                </div>
                
                <div id="commentsList" class="comments-list">
                  <!-- Comments will be loaded from Blogger API -->
                </div>

                <div class="comment-form" style="text-align: center; padding: 20px;">
                  <p style="color: #64748b; margin-bottom: 15px;">Để bình luận, bạn sẽ được chuyển đến trang Blogger</p>
                  <button class="comment-submit-btn" onclick="handleCommentSubmit()" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                    💬 Bình luận trên Blogger
                  </button>
                </div>
              </div>
            </article>
          `;
          
          // Sau khi render xong CMS, fetch related tools nếu cần
          const relatedGrid = document.querySelector('.related-grid-new');
          if (relatedGrid) {
             const related = posts.filter(p => 
                p.category && p.category.some(c => labels.includes(c.term)) && 
                !p.title.$t.includes(title)
             ).slice(0, 6);
             
             relatedGrid.innerHTML = related.map(p => {
                const rTitle = p.title.$t;
                const rImg = extractFirstImage(p.content?.$t || '') || extractMeta(p.content?.$t || '', 'ICON') || 'https://via.placeholder.com/45x45';
                const rUrl = p.link.find(l => l.rel === 'alternate')?.href || '#';
                const rDesc = extractDescription(p.content?.$t || '');
                return `
                  <a href="${rUrl}" class="related-card-mini">
                    <img src="${rImg}" alt="${rTitle}" onerror="handleImageError(this, '${rTitle.replace(/'/g, "\\'")}')">
                    <div class="related-mini-info">
                      <h4>${rTitle}</h4>
                      <p>${rDesc}</p>
                    </div>
                  </a>
                `;
             }).join('');
          }
          
          // Initialize Blogger Comments
          const postId = post.id?.$t?.split('post-').pop() || null;
          const postUrl = post.link?.find(l => l.rel === 'alternate')?.href || null;
          if (postId && postUrl) {
            initPostComments(postId, postUrl);
          }
        } else {
          mainContent.innerHTML = '<div class="no-results"><h3>❌ Không tìm thấy bài viết</h3></div>';
        }
      } catch (error) {
        console.error("Error loading post:", error);
        mainContent.innerHTML = '<div class="no-results"><h3>❌ Lỗi tải dữ liệu</h3></div>';
      }
      return;
    }

    // Logic cho TRANG DANH MỤC hoặc TRANG TÌM KIẾM
    if (isCategoryPage || isSearchPage) {
      console.log('Category or Search page detected');
      // Hiển thị Hero Banner (Minimal) + Trending Keywords bên trên
      mainContent.innerHTML = renderHero(true) + renderTrendingSearch() + '<div class="loading">⏳ Đang lọc dữ liệu...</div>';
      
      try {
        // Fetch ALL posts with pagination (150 per batch)
        let allPosts = [];
        let startIndex = 1;
        const batchSize = 150;
        const maxBatches = 50;
        let batchCount = 0;
        let hasMore = true;
        
        while (hasMore && batchCount < maxBatches) {
          batchCount++;
          const fetchUrl = `${blogUrl}/feeds/posts/default?alt=json&max-results=${batchSize}&start-index=${startIndex}`;
          
          try {
            const response = await fetch(fetchUrl);
            if (!response.ok) break;
            
            const data = await response.json();
            const posts = data.feed.entry || [];
            
            if (posts.length > 0) {
              allPosts = allPosts.concat(posts);
              startIndex += batchSize;
              
              // Update progress
              mainContent.innerHTML = renderHero(true) + renderTrendingSearch() + `<div class="loading">⏳ Đang tải... ${allPosts.length} bài viết</div>`;
              
              if (posts.length < batchSize) {
                hasMore = false;
              }
            } else {
              hasMore = false;
            }
          } catch (error) {
            console.error('Error fetching batch:', error);
            break;
          }
        }
        
        console.log(`Category/Search: Loaded ${allPosts.length} posts from ${batchCount} batches`);
        const posts = allPosts;
        
        let filteredPosts = posts;
        let pageTitle = "";
        let pageDesc = "";

        if (isCategoryPage) {
          const categoryName = decodeURIComponent(window.location.pathname.split('/').pop());
          filteredPosts = posts.filter(p => p.category && p.category.some(c => c.term === categoryName));
          pageTitle = categoryName;
          pageDesc = `Khám phá các bài viết và công cụ tốt nhất về ${categoryName}`;
        } else if (isSearchPage) {
          const urlParams = new URLSearchParams(window.location.search);
          const query = urlParams.get('q') || "";
          filteredPosts = posts.filter(p => {
            const title = p.title.$t.toLowerCase();
            const content = p.content ? p.content.$t.toLowerCase() : "";
            return title.includes(query.toLowerCase()) || content.includes(query.toLowerCase());
          });
          pageTitle = `Kết quả tìm kiếm: "${query}"`;
          pageDesc = `Tìm thấy ${filteredPosts.length} kết quả phù hợp`;
        }

        // Render Listing (UX List View - Ảnh bên trái)
        let listHtml = `
          <div class='category-view'>
            <div class='list-view'>
              ${filteredPosts.map(p => {
                const title = p.title.$t;
                const content = p.content ? p.content.$t : '';
                const summary = p.summary ? p.summary.$t : '';
                const img = extractFirstImage(content) || extractMeta(content, 'ICON') || extractMeta(content, 'HERO_IMAGE') || 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=500&h=301&fit=crop';
                const desc = extractDescription(content, summary);
                const postUrl = p.link.find(l => l.rel === 'alternate')?.href || '#';
                const date = new Date(p.published.$t).toLocaleDateString('vi-VN');
                const cat = p.category ? p.category[0].term : 'AI';
                
                return `
                  <a href="${postUrl}" class="list-card">
                    <div class="list-img-box">
                      <img src="${img}" alt="${title}"/>
                    </div>
                    <div class="list-info">
                      <h3 class="list-title">${title}</h3>
                      <p class="list-desc">${desc}</p>
                      <div class="list-footer">
                        <span class="list-cat">📁 ${cat}</span>
                        <span class="list-date">🕒 ${date}</span>
                      </div>
                    </div>
                  </a>
                `;
              }).join('')}
            </div>
          </div>
        `;
        
        if (filteredPosts.length === 0) {
          listHtml = `<div class='no-results'><h3>❌ Không tìm thấy kết quả nào</h3><a href='${blogUrl}' class='back-home-btn'>Quay lại trang chủ</a></div>`;
        }
        
        mainContent.innerHTML = renderHero(true) + renderTrendingSearch() + listHtml;
      } catch (error) {
        console.error("Error loading category/search:", error);
      }
      return;
    }
    
    // Homepage: Render tools grid
    console.log('Homepage detected - rendering tools');
    mainContent.innerHTML = `<div class="loading">${getRandomLoadingMessage()}</div>`;
    
    try {
      // Fetch ALL posts with pagination (150 per batch using start-index)
      let allPosts = [];
      let startIndex = 1;
      const batchSize = 150;
      const maxBatches = 50; // Safety limit: 50 batches = 7500 posts max
      let batchCount = 0;
      let hasMore = true;
      
      console.log('Starting to fetch all posts with pagination...');
      
      while (hasMore && batchCount < maxBatches) {
        batchCount++;
        const fetchUrl = `${blogUrl}/feeds/posts/default?alt=json&max-results=${batchSize}&start-index=${startIndex}`;
        console.log(`Fetching batch ${batchCount}: start-index=${startIndex}, max-results=${batchSize}`);
        
        try {
          const response = await fetch(fetchUrl);
          
          if (!response.ok) {
            console.warn(`Failed to fetch batch ${batchCount} at start-index=${startIndex}, status: ${response.status}`);
            break;
          }
          
          const data = await response.json();
          const posts = data.feed.entry || [];
          
          console.log(`Batch ${batchCount} loaded: ${posts.length} posts (total so far: ${allPosts.length + posts.length})`);
          
          // Update loading message with progress
          mainContent.innerHTML = `<div class="loading">⏳ Đang tải... ${allPosts.length + posts.length} công cụ</div>`;
          
          if (posts.length > 0) {
            allPosts = allPosts.concat(posts);
            startIndex += batchSize; // Move to next batch
            
            // If we got fewer posts than requested, we've reached the end
            if (posts.length < batchSize) {
              console.log(`✅ Reached end of posts (batch returned ${posts.length} < ${batchSize})`);
              hasMore = false;
            }
          } else {
            console.log('✅ No more posts available');
            hasMore = false; // No more posts
          }
        } catch (error) {
          console.error(`❌ Error fetching batch ${batchCount} at start-index=${startIndex}:`, error);
          break;
        }
      }
      
      if (batchCount >= maxBatches) {
        console.warn(`⚠️ Reached maximum batch limit (${maxBatches} batches). Stopping pagination.`);
      }
      
      console.log(`✅ All posts loaded: ${allPosts.length} total posts from ${batchCount} batches`);
      const posts = allPosts;
      
      allTools = posts.map(post => {
        const content = post.content ? post.content.$t : '';
        const summary = post.summary ? post.summary.$t : '';
        const permalink = (post.link.find(l => l.rel === 'alternate') || {}).href || '#';
        
        return {
          title: post.title.$t,
          description: extractDescription(content, summary),
          content: content,
          fullContent: extractFullContent(content),
          siteUrl: extractMeta(content, 'URL') || '#',
          permalink: permalink,
          url: permalink, // Legacy support
          icon: extractMeta(content, 'ICON') || extractFirstImage(content) || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="50" height="50"%3E%3Crect fill="%23667eea" width="50" height="50"/%3E%3C/svg%3E',
          heroImage: extractMeta(content, 'HERO_IMAGE') || extractMeta(content, 'ICON') || '',
          price: extractMeta(content, 'PRICE') || 'Free',
          rating: extractMeta(content, 'RATING') || '0',
          screenshots: extractScreenshots(content),
          relatedTools: extractMeta(content, 'RELATED') ? extractMeta(content, 'RELATED').split(',').map(t => t.trim()) : [],
          note: extractNote(content),
          tags: extractMeta(content, 'TAGS') ? extractMeta(content, 'TAGS').split(',').map(t => t.trim()) : [],
          categories: post.category ? post.category.map(c => c.term) : ['Uncategorized']
        };
      });
      
      // If no posts, add sample data for demo
      if (allTools.length === 0) {
        allTools = [
          {
            title: 'ChatGPT',
            description: 'Chatbot AI mạnh mẽ từ OpenAI, hỗ trợ chat thông minh, viết code và giải đáp mọi thắc mắc.',
            icon: 'https://cdn-icons-png.flaticon.com/512/12222/12222588.png',
            url: 'https://chatgpt.com',
            price: 'Free',
            tags: ['Hot', 'Chat'],
            categories: ['AI Viết lách']
          },
          {
            title: 'Midjourney',
            description: 'Công cụ tạo ảnh AI đỉnh cao nhất thế giới hiện nay với chất lượng nghệ thuật tuyệt vời.',
            icon: 'https://cdn-icons-png.flaticon.com/512/9496/9496506.png',
            url: 'https://midjourney.com',
            price: 'Paid',
            tags: ['Popular'],
            categories: ['AI Hội họa']
          },
          {
            title: 'Runway Gen-2',
            description: 'Tạo video từ văn bản và hình ảnh chuyên nghiệp chỉ trong vài giây.',
            icon: 'https://cdn-icons-png.flaticon.com/512/2991/2991148.png',
            url: 'https://runwayml.com',
            price: 'Trial',
            tags: ['New'],
            categories: ['Âm thanh & Video']
          },
          {
            title: 'GitHub Copilot',
            description: 'Trợ lý lập trình AI giúp bạn viết code nhanh hơn và ít lỗi hơn.',
            icon: 'https://cdn-icons-png.flaticon.com/512/2111/2111432.png',
            url: 'https://github.com/features/copilot',
            price: 'Paid',
            tags: ['Coding'],
            categories: ['AI Lập trình']
          },
          {
            title: 'Canva AI',
            description: 'Nền tảng thiết kế tích hợp các công cụ AI mạnh mẽ cho Designer.',
            icon: 'https://cdn-icons-png.flaticon.com/512/5968/5968170.png',
            url: 'https://canva.com',
            price: 'Free',
            tags: ['Design'],
            categories: ['Thiết kế Đồ họa']
          }
        ];
      }

      renderTools();
    } catch (error) {
      console.error("Error loading tools:", error);
      mainContent.innerHTML = '<div class="no-results"><h3>❌ Lỗi tải dữ liệu</h3><p>' + error.message + '</p></div>';
    }
  }

  // Extract metadata from content
  function extractMeta(content, key) {
    const regex = new RegExp(key + ':\\s*([^\\n]+)', 'i');
    const match = content.match(regex);
    return match ? match[1].trim() : '';
  }

  // Extract description
  function extractDescription(content, summary) {
    const metaIndex = content.indexOf('---META---');
    if (metaIndex > 0) {
      return content.substring(0, metaIndex).trim().substring(0, 200);
    }
    return (summary || content).replace(/<[^>]*>/g, '').substring(0, 200) + '...';
  }

  // Extract first image
  function extractFirstImage(content) {
    const imgMatch = content.match(/<img[^>]+src="([^">]+)"/);
    return imgMatch ? imgMatch[1] : '';
  }
  
  // Extract full content (remove metadata and auto-format)
  function extractFullContent(content) {
    let text = content;
    
    // Remove META section
    text = text.replace(/---META---[\s\S]*?---END---/g, '');
    // Remove SCREENSHOTS section  
    text = text.replace(/---SCREENSHOTS---[\s\S]*?---END---/g, '');
    // Remove RELATED section
    text = text.replace(/---RELATED---[\s\S]*?---END---/g, '');
    // Remove NOTE section
    text = text.replace(/---NOTE---[\s\S]*?---END---/g, '');
    
    // Clean up extra whitespace
    text = text.trim();
    
    // AUTO-FORMAT: Convert markdown headers to HTML
    text = text.replace(/^###\s+(.+)$/gm, '<h3>$1</h3>');
    text = text.replace(/^##\s+(.+)$/gm, '<h2>$1</h2>');
    text = text.replace(/^#\s+(.+)$/gm, '<h3>$1</h3>');
    
    // AUTO-FORMAT: Bold text (**)
    text = text.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
    
    // AUTO-FORMAT: Convert double line breaks to paragraphs
    // Split by double line breaks (paragraph separator)
    const paragraphs = text.split(/\n\s*\n/);
    
    // Wrap each paragraph in <p> tags (unless it's already a header or HTML tag)
    const formatted = paragraphs.map(para => {
      para = para.trim();
      if (!para) return '';
      
      // Skip if already has HTML tags
      if (para.startsWith('<h') || para.startsWith('<div') || para.startsWith('<ul') || para.startsWith('<ol')) {
        return para;
      }
      
      // Skip if it's just whitespace
      if (!para.replace(/\s/g, '')) return '';
      
      // Wrap in paragraph tag
      return `<p>${para.replace(/\n/g, '<br>')}</p>`;
    }).filter(p => p).join('\n');
    
    return formatted || text;
  }
  
  // Extract screenshots
  function extractScreenshots(content) {
    const match = content.match(/---SCREENSHOTS---([\s\S]*?)---END---/);
    if (match) {
      return match[1].trim().split('\n').map(url => url.trim()).filter(url => url);
    }
    return [];
  }
  
  // Extract note
  function extractNote(content) {
    const match = content.match(/---NOTE---([\s\S]*?)---END---/);
    return match ? match[1].trim() : '';
  }

  // Helper to remove accents
  function removeAccents(str) {
    return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "")
      .replace(/đ/g, "d").replace(/Đ/g, "D");
  }

  // Render tool cards

  // --- BOOKMARK SYSTEM ---
  function getBookmarks() {
    try {
      return JSON.parse(localStorage.getItem('ai_bookmarks')) || [];
    } catch(e) { return []; }
  }

  function toggleBookmark(toolId, btnElement) {
    if (!toolId) return;
    let bookmarks = getBookmarks();
    const index = bookmarks.indexOf(toolId);
    
    // Toggle
    if (index > -1) {
      bookmarks.splice(index, 1); // Remove
      if (btnElement) btnElement.classList.remove('active');
      // showToast('Đã bỏ lưu'); // Optional: Add toast later
    } else {
      bookmarks.push(toolId); // Add
      if (btnElement) btnElement.classList.add('active');
      // showToast('Đã lưu');
    }
    
    localStorage.setItem('ai_bookmarks', JSON.stringify(bookmarks));
    
    // If filtering by "saved", re-render
    if (currentCategory === 'saved') {
      renderTools();
    }
  }
  
  function isBookmarked(toolId) {
    return getBookmarks().includes(toolId);
  }

  function renderTools(forcedTerm = null) {
    const mainContent = document.getElementById('mainContent');
    const searchInput = document.getElementById('searchInput');
    
    // Get search term from input or forced value
    let searchTerm = forcedTerm !== null ? forcedTerm : (searchInput ? searchInput.value.toLowerCase() : '');
    const searchTermNoAccent = removeAccents(searchTerm.toLowerCase());
    
    let filtered = allTools.filter(tool => {
      const matchCategory = currentCategory === 'all' || tool.categories.includes(currentCategory);
      
      const title = tool.title.toLowerCase();
      const desc = tool.description.toLowerCase();
      const titleNoAccent = removeAccents(title);
      const descNoAccent = removeAccents(desc);
      
      const matchSearch = !searchTerm || 
        title.includes(searchTerm.toLowerCase()) || 
        desc.includes(searchTerm.toLowerCase()) ||
        titleNoAccent.includes(searchTermNoAccent) || 
        descNoAccent.includes(searchTermNoAccent) ||
        tool.tags.some(tag => {
           const tagLower = tag.toLowerCase();
           return tagLower.includes(searchTerm.toLowerCase()) || removeAccents(tagLower).includes(searchTermNoAccent);
        });

      return matchCategory && matchSearch;
    });
    
    // Start with Hero section
    let html = renderHero(false, forcedTerm !== null ? forcedTerm : (searchInput ? searchInput.value : ''));
    
    if (filtered.length === 0) {
      html += '<div class="no-results"><h3>🔍 Không tìm thấy công cụ nào</h3><p>Thử tìm kiếm với từ khóa khác</p></div>';
      mainContent.innerHTML = html;
      return;
    }
    
    if (currentCategory === 'all') {
      // Fixed category order theo menu bên trái (bỏ 'Ai Hot' vì đã có ở hero section)
      const fixedCategoryOrder = [
        'Viết nội dung',
        'Hình ảnh',
        'Video',
        'Văn phòng',
        'Trợ lý & Agent',
        'Chatbot',
        'Lập trình',
        'Thiết kế',
        'Âm thanh',
        'Tìm kiếm',
        'Nền tảng AI',
        'Học & Tài nguyên',
        'Huấn luyện mô hình',
        'Đánh giá mô hình',
        'Kiểm tra nội dung',
        'Prompt'
      ];
      
      // Chỉ lấy categories có tools
      const categories = fixedCategoryOrder.filter(cat => 
        filtered.some(t => t.categories.includes(cat))
      );
      
      categories.forEach(cat => {
        const catTools = filtered.filter(t => t.categories.includes(cat));
        if (catTools.length > 0) {
          // Show up to 20 tools in the summary view
          const displayTools = catTools.slice(0, 20);
          html += `
            <div class="category-section">
              <div class="category-header-row">
                <h2 class="category-header" data-cat="${cat}"><span class="category-icon">${getCategoryIcon(cat)}</span>${cat}</h2>
                <a href="#" onclick="selectCategory('${cat}'); return false;" class="view-more">Xem thêm (${catTools.length}) ››</a>
              </div>
              <div class="tools-grid">
                ${displayTools.map(tool => renderToolCard(tool)).join('')}
              </div>
            </div>
          `;
        }
      });
      mainContent.innerHTML = html;
    } else {
      // Single category view
      html += `
        <div class="category-section">
          <h2 class="category-header" data-cat="${currentCategory}"><span class="category-icon">${getCategoryIcon(currentCategory)}</span>${currentCategory}</h2>
          <div class="tools-grid">
            ${filtered.map(tool => renderToolCard(tool)).join('')}
          </div>
        </div>
      `;
      mainContent.innerHTML = html;
    }
  }

  function renderToolCard(tool) {
    // Determine badge
    let badge = '';
    if (tool.tags && tool.tags.some(t => t.toLowerCase().includes('hot') || t.toLowerCase().includes('trending'))) {
      badge = '<span class="tool-badge hot">HOT</span>';
    } else if (tool.tags && tool.tags.some(t => t.toLowerCase().includes('new'))) {
      badge = '<span class="tool-badge new">NEW</span>';
    }
    
    // Truncate description for tooltip (max 200 chars)
    const tooltipText = tool.description.length > 200 
      ? tool.description.substring(0, 200) + '...' 
      : tool.description;
    
    return `
      <a href="${tool.url}" target="_blank" class="tool-card">
        ${badge}
        <button class="tool-save-btn ${isBookmarked(tool.url) ? 'active' : ''}" 
                onclick="event.preventDefault(); event.stopPropagation(); toggleBookmark('${tool.url}', this)" 
                title="Lưu công cụ" aria-label="Lưu công cụ">
          <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </button>
        <img src="${tool.icon}" alt="${tool.title}" class="tool-icon" onerror="handleImageError(this, '${tool.title.replace(/'/g, "\\'")}')">
        <div class="tool-content">
          <h3 class="tool-title">${tool.title}</h3>
          <p class="tool-description">${tool.description}</p>
        </div>
        <div class="tool-tooltip">${tooltipText}</div>
      </a>
    `;
  }


  // Function to select category (from "View more")
  function selectCategory(category) {
    currentCategory = category;
    
    // Update sidebar active state
    document.querySelectorAll('.menu-link').forEach(link => {
      if (link.dataset.category === category) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
    
    renderTools();
    
    // Scroll to category header
    setTimeout(() => {
      const targetHeader = document.querySelector(`.category-header[data-cat="${category}"]`);
      if (targetHeader) {
        const headerRect = targetHeader.getBoundingClientRect();
        const headerTop = headerRect.top + window.pageYOffset;
        const targetY = headerTop - (window.innerHeight / 2) + (headerRect.height / 2);
        window.scrollTo({ top: Math.max(0, targetY), behavior: 'smooth' });
      } else {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }, 150);
  }


  // Event listeners are set inline in the HTML for dynamically generated elements

  // Sidebar menu handler
  document.querySelectorAll('.menu-link').forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      
      // Update active state
      document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
      e.currentTarget.classList.add('active');
      
      // Update category
      currentCategory = e.currentTarget.dataset.category;
      
      
      // Render tools
      renderTools();
      
      // Close mobile menu
      if (window.innerWidth <= 1024) {
        document.getElementById('sidebar').classList.remove('active');
      }
      
      // Scroll to category section after render
      setTimeout(() => {
        if (currentCategory === 'all') {
          window.scrollTo({ top: 0, behavior: 'smooth' });
          return;
        }

        const targetHeader = document.querySelector(`.category-header[data-cat="${currentCategory}"]`);
        if (targetHeader) {
          const headerRect = targetHeader.getBoundingClientRect();
          const headerTop = headerRect.top + window.pageYOffset;
          // Căn giữa tiêu đề danh mục trên màn hình
          const targetY = headerTop - (window.innerHeight / 2) + (headerRect.height / 2);
          
          window.scrollTo({ 
            top: Math.max(0, targetY), 
            behavior: 'smooth' 
          });
        }
      }, 150);
    });
  });

  // Mobile menu toggle
  document.getElementById('mobileMenuToggle').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('active');
  });

  // Close sidebar when clicking outside on mobile
  document.addEventListener('click', (e) => {
    const sidebar = document.getElementById('sidebar');
    const toggle = document.getElementById('mobileMenuToggle');
    
    if (window.innerWidth <= 1024 && 
        !sidebar.contains(e.target) && 
        !toggle.contains(e.target) &&
        sidebar.classList.contains('active')) {
      sidebar.classList.remove('active');
    }
  });

  // Show post detail modal
  function showPostDetail(originalIndex, skipHashUpdate = false) {
    // Find the tool by global index
    const tool = allTools[originalIndex];
    if (!tool) return;
    
    // Update URL hash for sharing
    if (!skipHashUpdate) {
      const toolSlug = tool.title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
      window.history.pushState(null, null, '#' + toolSlug);
    }
    
    // Create modal if not exists
    let modal = document.getElementById('postModal');
    if (!modal) {
      modal = document.createElement('div');
      modal.id = 'postModal';
      modal.className = 'post-modal';
      modal.innerHTML = `
        <button class="post-modal-close" onclick="closePostDetail()">×</button>
        <div class="post-detail-container" id="postDetailContent"></div>
      `;
      document.body.appendChild(modal);
    }
    
    // Render post detail
    const detailHtml = `
      <div class="post-hero">
        ${tool.heroImage ? `<img src="${tool.heroImage}" class="post-hero-image" alt="${tool.title}">` : ''}
        <div class="post-hero-content">
          <div class="post-category-tags">
            ${tool.categories.map(cat => `<span class="post-category-tag">${cat}</span>`).join('')}
          </div>
          <h1 class="post-title">${tool.title}</h1>
          <p class="post-description">${tool.description}</p>
          <div class="post-meta-info">
            <div class="post-meta-item">
              <span>💰</span>
              <span>${tool.price}</span>
            </div>
            ${tool.rating !== '0' ? `
            <div class="post-meta-item post-rating">
              <span>⭐</span>
              <span>${tool.rating}</span>
            </div>
            ` : ''}
            <div class="post-meta-item">
              ${tool.tags.map(tag => `<span class="tag ${tag.toLowerCase().includes('free') ? 'free' : ''}">${tag}</span>`).join('')}
            </div>
          </div>
          <a href="${tool.url}" target="_blank" class="post-cta-button">
            <span>Truy cập Website</span>
            <span>→</span>
          </a>
        </div>
      </div>
      
      <div class="post-content">
        ${tool.fullContent}
        
        ${tool.screenshots.length > 0 ? `
        <h2>📸 Screenshots</h2>
        <div class="screenshots-gallery">
          ${tool.screenshots.map(img => `
            <div class="screenshot-item">
              <img src="${img}" alt="Screenshot">
            </div>
          `).join('')}
        </div>
        ` : ''}
        
        ${tool.note ? `
        <div class="note-box">
          <p>${tool.note}</p>
        </div>
        ` : ''}
      </div>
      
      ${tool.relatedTools.length > 0 ? `
      <div class="related-tools-section">
        <h2>🔗 Công cụ tương tự như ${tool.title}</h2>
        <div class="related-tools-grid">
          ${tool.relatedTools.map(relatedName => {
            const relatedTool = allTools.find(t => t.title.toLowerCase().includes(relatedName.toLowerCase()));
            if (!relatedTool) return '';
            return `
              <div class="tool-card" onclick="showPostDetail(${allTools.indexOf(relatedTool)}, '${relatedTool.categories[0]}')">
                <img src="${relatedTool.icon}" class="tool-icon" alt="${relatedTool.title}">
                <div class="tool-content">
                  <div class="tool-header">
                    <h3 class="tool-title">${relatedTool.title}</h3>
                  </div>
                  <p class="tool-description">${relatedTool.description}</p>
                </div>
              </div>
            `;
          }).join('')}
        </div>
      </div>
      ` : ''}
      
      <div class="comments-container-new">
        <div class="comments-header-row">
          <div class="comments-title">
            <span>💬</span> <span id="commentCount">0</span> Bình luận
          </div>
          <button class="toggle-comments-btn" id="toggleCommentsBtn" onclick="toggleComments()">
            Đang thử nghiệm
          </button>
        </div>
        <div id="commentsList" class="comments-list">
          <!-- Comments will be rendered here -->
        </div>
        <div class="comment-form">
          <textarea id="commentContent" placeholder="Vui lòng nhập nội dung bình luận..."></textarea>
          <div class="comment-inputs-row">
            <input id="commentName" type="text" placeholder="Biệt danh (Bắt buộc)">
            <input id="commentEmail" type="email" placeholder="Email (Tùy chọn)">
            <input id="commentWebsite" type="text" placeholder="Website (Tùy chọn)">
          </div>
          <button class="comment-submit-btn" onclick="handleCommentSubmit()">Gửi bình luận</button>
        </div>
      </div>
    `;
    
    document.getElementById('postDetailContent').innerHTML = detailHtml;
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
  
  function closePostDetail() {
    const modal = document.getElementById('postModal');
    if (modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
      // Remove hash from URL
      window.history.pushState(null, null, window.location.pathname);
    }
  }
  
  // Handle hash changes (back/forward buttons)
  window.addEventListener('hashchange', () => {
    const hash = window.location.hash.substring(1);
    if (!hash) {
      closePostDetail();
    } else {
      openToolBySlug(hash);
    }
  });
  
  // Open tool by URL slug
  function openToolBySlug(slug) {
    const tool = allTools.find(t => {
      const toolSlug = t.title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
      return toolSlug === slug;
    });
    
    if (tool) {
      const category = tool.categories[0];
      const categoryTools = allTools.filter(t => t.categories.includes(category));
      const index = categoryTools.indexOf(tool);
      if (index !== -1) {
        showPostDetail(index, category, true);
      }
    }
  }

  // Load on page ready
  document.addEventListener('DOMContentLoaded', loadTools);
  
  // Toggle circular icon menu
  document.getElementById('popupMainIcon').addEventListener('click', () => {
    document.getElementById('popupMenuItems').classList.toggle('active');
  });
  
  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    const menu = document.getElementById('popupMenuItems');
    const icon = document.getElementById('popupMainIcon');
    if (!menu.contains(e.target) && !icon.contains(e.target)) {
      menu.classList.remove('active');
    }
  });
  
  // Check for hash on page load
  window.addEventListener('load', () => {
    const hash = window.location.hash.substring(1);
    if (hash) {
      // Wait for tools to load first
      const checkLoaded = setInterval(() => {
        if (allTools.length > 0) {
          clearInterval(checkLoaded);
          openToolBySlug(hash);
        }
      }, 100);
    }
  });
  // ===== BLOGGER NATIVE COMMENTS SYSTEM =====
  let currentPostId = null;
  let currentPostUrl = null;

  // Fetch comments from Blogger API
  async function loadBloggerComments(postId) {
    if (!postId) {
      console.log('No postId provided for comments');
      return [];
    }
    
    try {
      // Blogger comment feed URL format
      const commentUrl = `${blogUrl}/feeds/${postId}/comments/default?alt=json&max-results=50`;
      console.log('Fetching comments from:', commentUrl);
      
      const response = await fetch(commentUrl);
      if (!response.ok) {
        console.warn('Comments not available for this post');
        return [];
      }
      
      const data = await response.json();
      const comments = data.feed.entry || [];
      console.log(`Loaded ${comments.length} comments`);
      return comments;
    } catch (error) {
      console.error('Error loading Blogger comments:', error);
      return [];
    }
  }

  // Render comments in the UI
  function renderBloggerComments(comments) {
    const list = document.getElementById('commentsList');
    const countSpan = document.getElementById('commentCount');
    if (!list) return;

    if (comments.length === 0) {
      list.innerHTML = '<p style="color: #64748b; text-align: center; padding: 20px;">Chưa có bình luận nào. Hãy là người đầu tiên bình luận!</p>';
    } else {
      list.innerHTML = comments.map(c => {
        const authorName = c.author?.[0]?.name?.$t || 'Ẩn danh';
        const authorAvatar = c.author?.[0]?.gd$image?.src || `https://ui-avatars.com/api/?name=${encodeURIComponent(authorName)}&background=random`;
        const content = c.content?.$t || '';
        const date = new Date(c.published.$t).toLocaleDateString('vi-VN');
        
        return `
        <div class="comment-item">
          <img src="${authorAvatar}" class="comment-avatar" alt="${authorName}" onerror="this.src='https://ui-avatars.com/api/?name=${encodeURIComponent(authorName)}&background=random'">
          <div class="comment-content-box">
            <div class="comment-meta">
              <span class="comment-author">${authorName}</span>
              <span class="comment-date">${date}</span>
            </div>
            <div class="comment-text">${content}</div>
          </div>
        </div>
        `;
      }).join('');
    }
    
    if (countSpan) countSpan.innerText = comments.length;
    
    // Auto-show if has comments
    if (comments.length > 0) {
      list.classList.add('active');
      const btn = document.getElementById('toggleCommentsBtn');
      if (btn) btn.innerText = 'Ẩn bình luận';
    }
  }

  // Handle comment submit - show Blogger comment iframe
  function handleCommentSubmit() {
    // Get the comment form container
    const formContainer = document.querySelector('.comment-form');
    if (!formContainer) return;
    
    // Check if iframe already exists
    if (document.getElementById('blogger-comment-iframe')) {
      // Toggle visibility
      const iframe = document.getElementById('blogger-comment-iframe');
      iframe.style.display = iframe.style.display === 'none' ? 'block' : 'none';
      return;
    }
    
    if (!currentPostId) {
      formContainer.innerHTML = `
        <p style="color: #ef4444; text-align: center; padding: 20px;">
          ⚠️ Không thể tải form bình luận. Vui lòng thử lại sau hoặc bình luận trực tiếp trên 
          <a href="${currentPostUrl || '#'}" target="_blank" style="color: #3b82f6;">Blogger</a>.
        </p>
      `;
      return;
    }
    
    // Blog ID for viet-ai.online (extracted from Blogger feed)
    const blogId = '279912858432321139';
    
    // Create and show Blogger comment iframe
    const iframeSrc = `https://www.blogger.com/comment-iframe.g?blogID=${blogId}&postID=${currentPostId}&skin=https://draft.blogger.com/styles/blog-template-bundle_v2.css`;
    
    formContainer.innerHTML = `
      <div style="border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; margin-top: 15px;">
        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 12px 16px; font-weight: 600; display: flex; justify-content: space-between; align-items: center;">
          <span>💬 Viết bình luận</span>
          <button onclick="document.getElementById('blogger-comment-iframe').style.display='none'; document.querySelector('.comment-form').innerHTML='<p style=\\'color: #64748b; text-align: center; padding: 20px;\\'>Để bình luận, bạn sẽ được chuyển đến trang Blogger</p><button class=\\'comment-submit-btn\\' onclick=\\'handleCommentSubmit()\\' style=\\'background: linear-gradient(135deg, #3b82f6, #1d4ed8);\\'>💬 Bình luận trên Blogger</button>';" style="background: transparent; border: none; color: white; cursor: pointer; font-size: 18px;">✕</button>
        </div>
        <iframe 
          id="blogger-comment-iframe"
          src="${iframeSrc}"
          style="width: 100%; min-height: 350px; border: none; display: block;"
          loading="lazy"
        ></iframe>
      </div>
      <p style="color: #94a3b8; font-size: 0.85em; text-align: center; margin-top: 10px;">
        💡 Bạn cần đăng nhập Google để bình luận
      </p>
    `;
  }

  // Toggle comments visibility
  function toggleComments() {
    const list = document.getElementById('commentsList');
    const btn = document.getElementById('toggleCommentsBtn');
    if (!list || !btn) return;
    
    const isActive = list.classList.toggle('active');
    btn.innerText = isActive ? 'Ẩn bình luận' : 'Hiện bình luận';
  }

  // Initialize comments for a post
  async function initPostComments(postId, postUrl) {
    currentPostId = postId;
    currentPostUrl = postUrl;
    
    // Update submit button text
    const submitBtn = document.querySelector('.comment-submit-btn');
    if (submitBtn) {
      submitBtn.innerHTML = '💬 Bình luận trên Blogger';
    }
    
    // Load and render comments
    const comments = await loadBloggerComments(postId);
    renderBloggerComments(comments);
  }

  // Search functionality
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('input', () => {
      // Optional: reset category to all when searching if desired, 
      // or keep current category to search within it. 
      // Let's keep current category to allow filtering within a category.
      renderTools();
    });
  }

  const searchBtn = document.querySelector('.search-btn');
  if (searchBtn) {
    searchBtn.addEventListener('click', renderTools);
  }

  // Render categories in dropdown
  function renderDropdownCategories() {
    const grid = document.getElementById('categoryGrid');
    if (!grid) return;
    
    // Use fixed category order to ensure full menu always appears, even on filtered pages
    const categories = [
        'Ai Hot',
        'Viết nội dung',
        'Học & Tài nguyên', // Added early for visibility
        'Hình ảnh',
        'Video',
        'Văn phòng',
        'Trợ lý & Agent',
        'Chatbot',
        'Lập trình',
        'Thiết kế',
        'Âm thanh',
        'Tìm kiếm',
        'Nền tảng AI',
        'Huấn luyện mô hình',
        'Đánh giá mô hình',
        'Kiểm tra nội dung',
        'Prompt',
        'Tin tức'
    ];
    
    grid.innerHTML = `
      <a href="#" class="dropdown-cat-item" onclick="selectCategory('all'); toggleDropdown(); return false;">
        <span class="dropdown-cat-icon">🏠</span>
        <span>Tất cả</span>
      </a>
      ${categories.map(cat => {
        if (cat === 'Tin tức') {
           return `
            <a href="/search/label/Tin tức" class="dropdown-cat-item">
              <span class="dropdown-cat-icon">${getCategoryIcon(cat)}</span>
              <span>${cat}</span>
            </a>
           `;
        }
        return `
        <a href="#" class="dropdown-cat-item" onclick="selectCategory('${cat}'); toggleDropdown(); return false;">
          <span class="dropdown-cat-icon">${getCategoryIcon(cat)}</span>
          <span>${cat}</span>
        </a>
        `;
      }).join('')}
    `;
  }

  function toggleDropdown() {
    const dropdown = document.getElementById('categoryDropdown');
    const isActive = dropdown.classList.toggle('active');
    if (isActive) {
      renderDropdownCategories();
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = '';
    }
  }

  const headerToggle = document.getElementById('headerMenuToggle');
  const dropdownClose = document.getElementById('dropdownClose');
  const dropdownOverlay = document.getElementById('dropdownOverlay');

  if (headerToggle) headerToggle.addEventListener('click', toggleDropdown);
  if (dropdownClose) dropdownClose.addEventListener('click', toggleDropdown);
  if (dropdownOverlay) dropdownOverlay.addEventListener('click', toggleDropdown);

  // Mobile menu toggle (Sidebar)
  const mobileToggle = document.getElementById('mobileMenuToggle');
  const sidebar = document.getElementById('sidebar');
  if (mobileToggle && sidebar) {
    mobileToggle.addEventListener('click', () => {
      sidebar.classList.toggle('active');
    });
  }


  // Initialization complete
  //]]>
  </script>
</body>
</html>
